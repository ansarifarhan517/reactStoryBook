{"ast":null,"code":"import _objectSpread from \"/Users/farhanansari/Code/ui-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"/Users/farhanansari/Code/ui-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/farhanansari/Code/ui-library/src/components/atoms/Map/layers/LeafletTripsLayer.tsx\";\n\n// The layer which displays a trip - markers + trip path both\nimport React from 'react';\nimport AntPath from 'react-leaflet-ant-path';\nimport GoogleRouteContainer from '../utils/GoogleIntegration/googleRoute';\nimport LeafletMarkerLayer from './LeafletMarkerLayer';\nimport HereMapsRouteContainer from '../utils/HereMapsIntegration/heremapsRoute';\n\nvar LeafletTripsLayer = function LeafletTripsLayer(props) {\n  var _props$trips, _props$trips$config, _props$trips2, _props$trips3, _props$trips3$data, _props$trips4, _props$trips4$data, _props$trips5, _props$trips5$config, _props$trips6, _props$trips6$data, _props$trips7, _props$trips8, _props$trips8$config, _props$trips9, _props$trips9$data;\n\n  var popupRef = props.popupRef,\n      iconsRef = props.iconsRef,\n      showModal = props.showModal,\n      google = props.google,\n      focusSearchPlace = props.focusSearchPlace; // if back to hub property is on, then append the first child again to the trip\n\n  var wayPoints = [];\n  props.trips.data.forEach(function (trip) {\n    return wayPoints.push.apply(wayPoints, _toConsumableArray(trip.waypoints));\n  }); //  const positions = (props.trips?.config?.backToStart\n  //     ? [wayPoints, wayPoints[0]]\n  //     : wayPoints )?.map((point: any) => {\n  //       return point.position\n  //     });\n\n  var latLngArr = [];\n  props.trips.data.forEach(function (trip) {\n    latLngArr.push.apply(latLngArr, _toConsumableArray(trip.waypoints.map(function (e) {\n      return e.position;\n    })));\n  });\n  var colorsList = props.trips.data.map(function (trip) {\n    return trip.color;\n  });\n\n  var tripMarkerProps = _objectSpread(_objectSpread({}, props), {}, {\n    markers: {\n      permission: true,\n      entities: ['trips'],\n      entitiesMap: {\n        trips: {\n          legends: ['hub', 'PickupLocation', 'DeliverLocation'],\n          legendsMap: {\n            hub: {\n              value: 'hub',\n              permission: true,\n              id: 'hub',\n              iconRef: 'hub',\n              popupRef: 'hub',\n              connect: true\n            },\n            PickupLocation: {\n              value: 'PickupLocation',\n              permission: true,\n              id: 'PickupLocation',\n              iconRef: 'pickupLocation',\n              popupRef: 'pickupLocation',\n              connect: true\n            },\n            DeliverLocation: {\n              value: 'DeliverLocation',\n              permission: true,\n              id: 'DeliverLocation',\n              iconRef: 'deliverLocation',\n              popupRef: 'deliverLocation',\n              connect: true\n            }\n          },\n          permission: true,\n          markers: {\n            list: wayPoints,\n            metaData: props.trips.metaData\n          }\n        }\n      }\n    }\n  });\n\n  console.log('props.trips?.config?.mode', (_props$trips = props.trips) === null || _props$trips === void 0 ? void 0 : (_props$trips$config = _props$trips.config) === null || _props$trips$config === void 0 ? void 0 : _props$trips$config.mode, 'props', props);\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }\n  }, ((_props$trips2 = props.trips) === null || _props$trips2 === void 0 ? void 0 : _props$trips2.permission) && (props === null || props === void 0 ? void 0 : (_props$trips3 = props.trips) === null || _props$trips3 === void 0 ? void 0 : (_props$trips3$data = _props$trips3.data) === null || _props$trips3$data === void 0 ? void 0 : _props$trips3$data.length) > 0 && /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(LeafletMarkerLayer, {\n    marker: tripMarkerProps.markers,\n    popupRef: popupRef,\n    iconsRef: iconsRef,\n    showModal: showModal,\n    google: google,\n    heatMap: false,\n    focusSearchPlace: focusSearchPlace,\n    legendModel: false,\n    ignoreMarkerPermission: true,\n    showLegendWrapper: false,\n    showSequenceWrapperBox: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 11\n    }\n  }), (props === null || props === void 0 ? void 0 : props.modeOfTravel) === 'Truck' && (props === null || props === void 0 ? void 0 : (_props$trips4 = props.trips) === null || _props$trips4 === void 0 ? void 0 : (_props$trips4$data = _props$trips4.data) === null || _props$trips4$data === void 0 ? void 0 : _props$trips4$data.length) < 250 && /*#__PURE__*/React.createElement(HereMapsRouteContainer, Object.assign({}, props, {\n    positions: latLngArr,\n    color: colorsList,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  })), ((_props$trips5 = props.trips) === null || _props$trips5 === void 0 ? void 0 : (_props$trips5$config = _props$trips5.config) === null || _props$trips5$config === void 0 ? void 0 : _props$trips5$config.mode) === 'aerial' && (props === null || props === void 0 ? void 0 : props.modeOfTravel) !== 'Truck' && (props === null || props === void 0 ? void 0 : (_props$trips6 = props.trips) === null || _props$trips6 === void 0 ? void 0 : (_props$trips6$data = _props$trips6.data) === null || _props$trips6$data === void 0 ? void 0 : _props$trips6$data.length) < 250 && /*#__PURE__*/React.createElement(AntPath, {\n    positions: latLngArr,\n    options: _objectSpread(_objectSpread({}, (_props$trips7 = props.trips) === null || _props$trips7 === void 0 ? void 0 : _props$trips7.config), {}, {\n      hardwareAccelerated: true,\n      color: {\n        color: colorsList\n      }\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }), ((_props$trips8 = props.trips) === null || _props$trips8 === void 0 ? void 0 : (_props$trips8$config = _props$trips8.config) === null || _props$trips8$config === void 0 ? void 0 : _props$trips8$config.mode) === 'google' && (props === null || props === void 0 ? void 0 : props.modeOfTravel) !== 'Truck' && (props === null || props === void 0 ? void 0 : (_props$trips9 = props.trips) === null || _props$trips9 === void 0 ? void 0 : (_props$trips9$data = _props$trips9.data) === null || _props$trips9$data === void 0 ? void 0 : _props$trips9$data.length) < 250 &&\n  /*#__PURE__*/\n  //  props.trips.data.map((trip:any)=>{\n  //    if(trip?.waypoints && trip.waypoints?.length){\n  //     const positions = trip.waypoints.map((e:any) =>e.position);\n  //     const color = trip.color;\n  //    }\n  //    return null;\n  //  })\n  React.createElement(GoogleRouteContainer, Object.assign({}, props, {\n    positions: latLngArr,\n    color: colorsList,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  }))));\n};\n\nexport default LeafletTripsLayer;","map":{"version":3,"sources":["/Users/farhanansari/Code/ui-library/src/components/atoms/Map/layers/LeafletTripsLayer.tsx"],"names":["React","AntPath","GoogleRouteContainer","LeafletMarkerLayer","HereMapsRouteContainer","LeafletTripsLayer","props","popupRef","iconsRef","showModal","google","focusSearchPlace","wayPoints","trips","data","forEach","trip","push","waypoints","latLngArr","map","e","position","colorsList","color","tripMarkerProps","markers","permission","entities","entitiesMap","legends","legendsMap","hub","value","id","iconRef","connect","PickupLocation","DeliverLocation","list","metaData","console","log","config","mode","length","modeOfTravel","hardwareAccelerated"],"mappings":"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","sourcesContent":["// The layer which displays a trip - markers + trip path both\n\nimport React from 'react'\nimport AntPath from 'react-leaflet-ant-path'\nimport ILeafletMapProps from '../interfaces.d'\nimport GoogleRouteContainer from '../utils/GoogleIntegration/googleRoute'\nimport LeafletMarkerLayer from './LeafletMarkerLayer'\nimport HereMapsRouteContainer from '../utils/HereMapsIntegration/heremapsRoute'\n\ninterface ILeafletTripsLayer extends ILeafletMapProps {\n  showModal: boolean\n  heatMap: boolean\n  focusSearchPlace: boolean\n}\n\nconst LeafletTripsLayer = (props: ILeafletTripsLayer) => {\n  const {\n    popupRef,\n    iconsRef,\n    showModal,\n    google,\n    //  heatMap,\n    focusSearchPlace\n  } = props\n  // if back to hub property is on, then append the first child again to the trip\n  const wayPoints: any[] = []\n  props.trips.data.forEach((trip: any) => wayPoints.push(...trip.waypoints))\n  //  const positions = (props.trips?.config?.backToStart\n  //     ? [wayPoints, wayPoints[0]]\n  //     : wayPoints )?.map((point: any) => {\n  //       return point.position\n  //     });\n  const latLngArr: any[] = []\n  props.trips.data.forEach((trip: any) => {\n    latLngArr.push(...trip.waypoints.map((e: any) => e.position))\n  })\n  const colorsList = props.trips.data.map((trip: any) => {\n    return trip.color\n  })\n\n  const tripMarkerProps = {\n    ...props,\n    markers: {\n      permission: true,\n      entities: ['trips'],\n      entitiesMap: {\n        trips: {\n          legends: ['hub', 'PickupLocation', 'DeliverLocation'],\n          legendsMap: {\n            hub: {\n              value: 'hub',\n              permission: true,\n              id: 'hub',\n              iconRef: 'hub',\n              popupRef: 'hub',\n              connect: true\n            },\n            PickupLocation: {\n              value: 'PickupLocation',\n              permission: true,\n              id: 'PickupLocation',\n              iconRef: 'pickupLocation',\n              popupRef: 'pickupLocation',\n              connect: true\n            },\n            DeliverLocation: {\n              value: 'DeliverLocation',\n              permission: true,\n              id: 'DeliverLocation',\n              iconRef: 'deliverLocation',\n              popupRef: 'deliverLocation',\n              connect: true\n            }\n          },\n          permission: true,\n          markers: {\n            list: wayPoints,\n            metaData: props.trips.metaData\n          }\n        }\n      }\n    }\n  }\n\n  console.log(\n    'props.trips?.config?.mode',\n    props.trips?.config?.mode,\n    'props',\n    props\n  )\n  return (\n    <React.Fragment>\n      {props.trips?.permission && props?.trips?.data?.length > 0 && (\n        <React.Fragment>\n          <LeafletMarkerLayer\n            marker={tripMarkerProps.markers}\n            popupRef={popupRef}\n            iconsRef={iconsRef}\n            showModal={showModal}\n            google={google}\n            heatMap={false}\n            focusSearchPlace={focusSearchPlace}\n            legendModel={false}\n            ignoreMarkerPermission\n            showLegendWrapper={false}\n            showSequenceWrapperBox\n          />\n          {props?.modeOfTravel === 'Truck' && props?.trips?.data?.length < 250 && (\n            <HereMapsRouteContainer\n              {...props}\n              positions={latLngArr}\n              color={colorsList}\n            />\n          )}\n\n          {props.trips?.config?.mode === 'aerial' &&\n            props?.modeOfTravel !== 'Truck' &&\n            props?.trips?.data?.length < 250 && (\n              <AntPath\n                positions={latLngArr}\n                options={{\n                  ...props.trips?.config,\n                  hardwareAccelerated: true,\n                  color: { color: colorsList }\n                }}\n              ></AntPath>\n            )}\n\n          {props.trips?.config?.mode === 'google' &&\n            props?.modeOfTravel !== 'Truck' &&\n            props?.trips?.data?.length < 250 && (\n              //  props.trips.data.map((trip:any)=>{\n              //    if(trip?.waypoints && trip.waypoints?.length){\n              //     const positions = trip.waypoints.map((e:any) =>e.position);\n              //     const color = trip.color;\n\n              //    }\n              //    return null;\n              //  })\n              <GoogleRouteContainer\n                {...props}\n                positions={latLngArr}\n                color={colorsList}\n              />\n            )}\n\n          {/* <div className='tripSequencer'>Hello man</div> */}\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  )\n}\n\nexport default LeafletTripsLayer\n"]},"metadata":{},"sourceType":"module"}