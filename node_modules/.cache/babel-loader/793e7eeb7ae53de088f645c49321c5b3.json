{"ast":null,"code":"import _objectSpread from \"/Users/farhanansari/Code/ui-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/farhanansari/Code/ui-library/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/farhanansari/Code/ui-library/src/components/molecules/ShiftTimings/components/TimePicker/index.tsx\";\n\nimport React from 'react';\nimport TextInput from '../../../TextInput';\nimport { DatePicker } from '../../../DatePicker';\nimport { TimePickerTextInputStyled } from './styled';\n\nvar parseTime = function parseTime(timeString) {\n  var timeTokens = timeString.split(':');\n\n  if (timeTokens.length === 2 && !isNaN(Number(timeTokens[0])) && !isNaN(Number(timeTokens[1]))) {\n    return new Date(\"01/01/1970 \".concat(timeTokens[0], \":\").concat(timeTokens[1], \":00\"));\n  }\n\n  return undefined;\n};\n\nvar convertToString = function convertToString(d) {\n  return d ? d.getHours() + ':' + d.getMinutes() : '';\n};\n\nvar TimePicker = function TimePicker(_ref) {\n  var id = _ref.id,\n      _ref$required = _ref.required,\n      required = _ref$required === void 0 ? false : _ref$required,\n      label = _ref.label,\n      errorMessage = _ref.errorMessage,\n      error = _ref.error,\n      placeholder = _ref.placeholder,\n      timeFormat = _ref.timeFormat,\n      _ref$timeInterval = _ref.timeInterval,\n      timeInterval = _ref$timeInterval === void 0 ? 15 : _ref$timeInterval,\n      time = _ref.time,\n      _ref$stringToTime = _ref.stringToTime,\n      stringToTime = _ref$stringToTime === void 0 ? parseTime : _ref$stringToTime,\n      _ref$timeToString = _ref.timeToString,\n      timeToString = _ref$timeToString === void 0 ? convertToString : _ref$timeToString,\n      _ref$onChange = _ref.onChange,\n      _onChange = _ref$onChange === void 0 ? function () {} : _ref$onChange;\n\n  var _React$useState = React.useState(),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      typedValue = _React$useState2[0],\n      setTypedValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      hasPickerPlacementTop = _React$useState4[0],\n      setHasPickerPlacementTop = _React$useState4[1];\n\n  var inputRef = React.useRef(null);\n  var handleTextChange = React.useCallback(function (e) {\n    setTypedValue(e.target.value);\n  }, [setTypedValue]);\n\n  var handleTextBlur = function handleTextBlur() {\n    if (typedValue !== undefined) {\n      if (typedValue === '') {\n        _onChange(id, undefined);\n\n        return;\n      }\n\n      var parsedTime = stringToTime(typedValue);\n      setTypedValue(undefined);\n\n      if (parsedTime) {\n        _onChange(id, parsedTime);\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(TimePickerTextInputStyled, {\n    className: \"Apna-wrapper\",\n    ref: inputRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(DatePicker, {\n    onChange: function onChange(date) {\n      return _onChange(id, date);\n    },\n    label: label,\n    required: required,\n    variant: \"time\",\n    timeInterval: timeInterval,\n    timeFormat: timeFormat,\n    selected: time,\n    style: _objectSpread({\n      position: 'absolute',\n      right: 'auto',\n      zIndex: '1000'\n      /* not able to add from theme here, added directly just because it was urgent */\n\n    }, hasPickerPlacementTop ? {\n      bottom: '70px'\n    } : {\n      top: '60px'\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }\n  }, function (_ref2) {\n    var value = _ref2.value,\n        open = _ref2.open,\n        setOpen = _ref2.setOpen;\n    return /*#__PURE__*/React.createElement(TextInput, {\n      id: id,\n      label: label,\n      error: error,\n      errorMessage: errorMessage,\n      className: \"someClassname\",\n      placeholder: placeholder,\n      variant: \"withIcon\",\n      iconVariant: \"clock-history-outline\",\n      iconSize: 25,\n      iconStyle: {\n        lineHeight: '16px',\n        fontSize: '15px',\n        cursor: 'pointer'\n      },\n      onIconClick: function onIconClick() {\n        var _inputRef$current, _inputRef$current$get;\n\n        setOpen(!open);\n        setHasPickerPlacementTop(window.innerHeight - (((_inputRef$current = inputRef.current) === null || _inputRef$current === void 0 ? void 0 : (_inputRef$current$get = _inputRef$current.getBoundingClientRect()) === null || _inputRef$current$get === void 0 ? void 0 : _inputRef$current$get.bottom) || 0) < 280);\n      } // do not change the content-box to border box\n      ,\n      style: {\n        boxSizing: 'content-box',\n        minHeight: '38px'\n      } // iconSize='md'\n      ,\n      value: typedValue !== undefined ? typedValue : value && timeToString(value) // iconStyle={{ padding: '9px 9px 9px 9px' }}\n      ,\n      onClick: function onClick() {\n        var _inputRef$current2, _inputRef$current2$ge;\n\n        setOpen(!open);\n        setHasPickerPlacementTop(window.innerHeight - (((_inputRef$current2 = inputRef.current) === null || _inputRef$current2 === void 0 ? void 0 : (_inputRef$current2$ge = _inputRef$current2.getBoundingClientRect()) === null || _inputRef$current2$ge === void 0 ? void 0 : _inputRef$current2$ge.bottom) || 0) < 280);\n      },\n      fullWidth: true,\n      onChange: handleTextChange,\n      onBlur: handleTextBlur,\n      required: required,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 13\n      }\n    });\n  }));\n};\n\nexport default TimePicker;","map":{"version":3,"sources":["/Users/farhanansari/Code/ui-library/src/components/molecules/ShiftTimings/components/TimePicker/index.tsx"],"names":["React","TextInput","DatePicker","TimePickerTextInputStyled","parseTime","timeString","timeTokens","split","length","isNaN","Number","Date","undefined","convertToString","d","getHours","getMinutes","TimePicker","id","required","label","errorMessage","error","placeholder","timeFormat","timeInterval","time","stringToTime","timeToString","onChange","useState","typedValue","setTypedValue","hasPickerPlacementTop","setHasPickerPlacementTop","inputRef","useRef","handleTextChange","useCallback","e","target","value","handleTextBlur","parsedTime","date","position","right","zIndex","bottom","top","open","setOpen","lineHeight","fontSize","cursor","window","innerHeight","current","getBoundingClientRect","boxSizing","minHeight"],"mappings":"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","sourcesContent":["import React from 'react'\n\nimport { ITimePickerProps } from '../../interfaces'\nimport TextInput from '../../../TextInput'\nimport { DatePicker } from '../../../DatePicker'\nimport { tDatePickerChildren } from '../../../DatePicker/interfaces'\nimport { TimePickerTextInputStyled } from './styled'\n\nconst parseTime = (timeString: string) => {\n  const timeTokens = timeString.split(':')\n  if (\n    timeTokens.length === 2 &&\n    !isNaN(Number(timeTokens[0])) &&\n    !isNaN(Number(timeTokens[1]))\n  ) {\n    return new Date(`01/01/1970 ${timeTokens[0]}:${timeTokens[1]}:00`)\n  }\n  return undefined\n}\n\nconst convertToString = (d: Date | undefined) =>\n  d ? d.getHours() + ':' + d.getMinutes() : ''\n\nconst TimePicker = ({\n  id,\n  required = false,\n  label,\n  errorMessage,\n  error,\n  placeholder,\n  timeFormat,\n  timeInterval = 15,\n  time,\n  stringToTime = parseTime,\n  timeToString = convertToString,\n  onChange = () => {}\n}: ITimePickerProps) => {\n  const [typedValue, setTypedValue] = React.useState<string | undefined>()\n  const [hasPickerPlacementTop, setHasPickerPlacementTop] = React.useState<\n    boolean\n  >(false)\n  const inputRef = React.useRef<HTMLDivElement | null>(null)\n  const handleTextChange = React.useCallback(\n    (e: React.ChangeEvent<HTMLInputElement>) => {\n      setTypedValue(e.target.value)\n    },\n    [setTypedValue]\n  )\n\n  const handleTextBlur = () => {\n    if (typedValue !== undefined) {\n      if (typedValue === '') {\n        onChange(id, undefined)\n        return\n      }\n\n      const parsedTime = stringToTime(typedValue)\n      setTypedValue(undefined)\n      if (parsedTime) {\n        onChange(id, parsedTime)\n      }\n    }\n  }\n\n  return (\n    <TimePickerTextInputStyled className='Apna-wrapper' ref={inputRef}>\n      <DatePicker\n        onChange={(date) => onChange(id, date)}\n        label={label}\n        required={required}\n        variant='time'\n        timeInterval={timeInterval}\n        timeFormat={timeFormat}\n        selected={time}\n        style={{\n          position: 'absolute',\n          right: 'auto',\n          zIndex:\n            '1000' /* not able to add from theme here, added directly just because it was urgent */,\n          ...(hasPickerPlacementTop ? { bottom: '70px' } : { top: '60px' })\n        }}\n      >\n        {({ value, open, setOpen }: tDatePickerChildren) => {\n          return (\n            <TextInput\n              id={id}\n              label={label}\n              error={error}\n              errorMessage={errorMessage}\n              className='someClassname'\n              placeholder={placeholder}\n              variant='withIcon'\n              iconVariant='clock-history-outline'\n              iconSize={25}\n              iconStyle={{\n                lineHeight: '16px',\n                fontSize: '15px',\n                cursor: 'pointer'\n              }}\n              onIconClick={() => {\n                setOpen(!open)\n                setHasPickerPlacementTop(\n                  window.innerHeight -\n                    (inputRef.current?.getBoundingClientRect()?.bottom || 0) <\n                    280\n                )\n              }}\n              // do not change the content-box to border box\n              style={{ boxSizing: 'content-box', minHeight: '38px' }}\n              // iconSize='md'\n              value={\n                typedValue !== undefined\n                  ? typedValue\n                  : value && timeToString(value)\n              }\n              // iconStyle={{ padding: '9px 9px 9px 9px' }}\n              onClick={() => {\n                setOpen(!open)\n                setHasPickerPlacementTop(\n                  window.innerHeight -\n                    (inputRef.current?.getBoundingClientRect()?.bottom || 0) <\n                    280\n                )\n              }}\n              fullWidth\n              onChange={handleTextChange}\n              onBlur={handleTextBlur}\n              required={required}\n            />\n          )\n        }}\n      </DatePicker>\n    </TimePickerTextInputStyled>\n  )\n}\nexport default TimePicker\n"]},"metadata":{},"sourceType":"module"}