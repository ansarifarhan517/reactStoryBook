{"ast":null,"code":"import _slicedToArray from \"/Users/farhanansari/Desktop/CODE/PrxProject/untitled folder/reactStoryBook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/farhanansari/Desktop/CODE/PrxProject/untitled folder/reactStoryBook/src/components/atoms/Charts/PieChart/index.tsx\";\n\nimport React, { useEffect, useState } from 'react';\nimport { Cell, Legend, Pie, PieChart, ResponsiveContainer, Sector, Tooltip } from 'recharts';\nimport CustomLegend from '../CustomLegend';\nimport PieChartTooltip from './DefaultTooltip';\nimport { StyledPieChart } from './StyledPieChart'; // IDetails is the data fomat provided to pie chart\n\nvar renderActiveShape = function renderActiveShape(_ref) {\n  var cx = _ref.cx,\n      cy = _ref.cy,\n      innerRadius = _ref.innerRadius,\n      outerRadius = _ref.outerRadius,\n      startAngle = _ref.startAngle,\n      endAngle = _ref.endAngle,\n      fill = _ref.fill;\n  return /*#__PURE__*/React.createElement(\"g\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Sector, {\n    cx: cx,\n    cy: cy,\n    innerRadius: innerRadius,\n    outerRadius: outerRadius + 5,\n    startAngle: startAngle,\n    endAngle: endAngle,\n    fill: fill,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }\n  }));\n};\n\nvar getTotal = function getTotal(data) {\n  return data.reduce(function (sum, option) {\n    if (option.active) {\n      var value = option.value || 0;\n      return sum + value;\n    }\n\n    return sum;\n  }, 0);\n};\n\nvar getActiveData = function getActiveData(data) {\n  return data.filter(function (option) {\n    return option.active;\n  }).sort(function (d1, d2) {\n    return -((d1 === null || d1 === void 0 ? void 0 : d1.value) || 0) + ((d2 === null || d2 === void 0 ? void 0 : d2.value) || 0);\n  });\n};\n\nvar PieChartComponent = function PieChartComponent(_ref2) {\n  var details = _ref2.details,\n      _ref2$height = _ref2.height,\n      height = _ref2$height === void 0 ? 150 : _ref2$height,\n      onLegendClick = _ref2.onLegendClick,\n      onPieClick = _ref2.onPieClick;\n\n  var _useState = useState(details),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  var _useState3 = useState(getActiveData(details)),\n      _useState4 = _slicedToArray(_useState3, 2),\n      activeData = _useState4[0],\n      setActiveData = _useState4[1];\n\n  var _useState5 = useState(undefined),\n      _useState6 = _slicedToArray(_useState5, 2),\n      activeIndex = _useState6[0],\n      setActiveIndex = _useState6[1];\n\n  var _useState7 = useState(getTotal(data)),\n      _useState8 = _slicedToArray(_useState7, 2),\n      total = _useState8[0],\n      setTotal = _useState8[1];\n\n  useEffect(function () {\n    setData(getActiveData(details));\n    setActiveData(getActiveData(details));\n    setTotal(getTotal(details));\n  }, [details]);\n\n  var onPieEnter = function onPieEnter(_data, index) {\n    setActiveIndex(index);\n  };\n\n  var pieOnClick = function pieOnClick(_data) {\n    onPieClick && onPieClick(_data); // onLegendClick && onLegendClick(_data.payload)\n  };\n\n  var handleClick = function handleClick(option) {\n    var newDetails = Array.from(Object.create(data)); // here we are changing active to false for unticked legends\n\n    newDetails.forEach(function (dataItem) {\n      if (dataItem.name === option.name) {\n        if (activeData.length > 1) {\n          dataItem.active = !option.active;\n        } else {\n          dataItem.active = true;\n        }\n      }\n    });\n    setData(newDetails); // here on pie chart we are filtering out those legends which are active\n\n    var activeDetails = getActiveData(newDetails);\n    setActiveData(activeDetails); // total of sectors based on new active legends\n\n    setTotal(getTotal(activeDetails)); // send changed status of all legend out\n\n    onLegendClick && onLegendClick(newDetails);\n  };\n\n  return /*#__PURE__*/React.createElement(StyledPieChart, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ResponsiveContainer, {\n    width: \"100%\",\n    height: height,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(PieChart, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Legend, {\n    content: /*#__PURE__*/React.createElement(CustomLegend, {\n      details: data,\n      isRow: false,\n      onChange: function onChange(option) {\n        return handleClick(option);\n      },\n      isFullWidth: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 15\n      }\n    }),\n    wrapperStyle: {\n      position: 'unset',\n      top: '9px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Pie, {\n    activeIndex: activeIndex,\n    activeShape: renderActiveShape,\n    data: activeData,\n    onClick: pieOnClick,\n    innerRadius: \"60%\",\n    outerRadius: \"70%\",\n    dataKey: \"value\",\n    blendStroke: true,\n    onMouseEnter: onPieEnter,\n    isAnimationActive: true,\n    onMouseOut: function onMouseOut() {\n      return setActiveIndex(undefined);\n    },\n    animationBegin: 2,\n    animationEasing: \"linear\",\n    cx: \"85%\",\n    cy: \"45%\",\n    animationDuration: 1,\n    className: \"pie\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 11\n    }\n  }, activeData.map(function (entry) {\n    return /*#__PURE__*/React.createElement(Cell, {\n      key: entry.name,\n      fill: entry.color,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 15\n      }\n    });\n  })), /*#__PURE__*/React.createElement(Tooltip, {\n    active: true,\n    content: function content(props) {\n      return props.payload.length !== 0 ? /*#__PURE__*/React.createElement(PieChartTooltip, {\n        payload: props.payload,\n        total: total,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 17\n        }\n      }) : /*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 17\n        }\n      });\n    } //   wrapperStyle={{ height: '31px', width: '100%' }}\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default PieChartComponent;","map":{"version":3,"sources":["/Users/farhanansari/Desktop/CODE/PrxProject/untitled folder/reactStoryBook/src/components/atoms/Charts/PieChart/index.tsx"],"names":["React","useEffect","useState","Cell","Legend","Pie","PieChart","ResponsiveContainer","Sector","Tooltip","CustomLegend","PieChartTooltip","StyledPieChart","renderActiveShape","cx","cy","innerRadius","outerRadius","startAngle","endAngle","fill","getTotal","data","reduce","sum","option","active","value","getActiveData","filter","sort","d1","d2","PieChartComponent","details","height","onLegendClick","onPieClick","setData","activeData","setActiveData","undefined","activeIndex","setActiveIndex","total","setTotal","onPieEnter","_data","index","pieOnClick","handleClick","newDetails","Array","from","Object","create","forEach","dataItem","name","length","activeDetails","position","top","map","entry","color","props","payload"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SACEC,IADF,EAEEC,MAFF,EAGEC,GAHF,EAIEC,QAJF,EAKEC,mBALF,EAMEC,MANF,EAOEC,OAPF,QAQO,UARP;AASA,OAAOC,YAAP,MAAyB,iBAAzB;AAEA,OAAOC,eAAP,MAA4B,kBAA5B;AACA,SAASC,cAAT,QAA+B,kBAA/B,C,CAEA;;AAEA,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,OAgBpB;AAAA,MAfJC,EAeI,QAfJA,EAeI;AAAA,MAdJC,EAcI,QAdJA,EAcI;AAAA,MAbJC,WAaI,QAbJA,WAaI;AAAA,MAZJC,WAYI,QAZJA,WAYI;AAAA,MAXJC,UAWI,QAXJA,UAWI;AAAA,MAVJC,QAUI,QAVJA,QAUI;AAAA,MATJC,IASI,QATJA,IASI;AACJ,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,EAAE,EAAEN,EADN;AAEE,IAAA,EAAE,EAAEC,EAFN;AAGE,IAAA,WAAW,EAAEC,WAHf;AAIE,IAAA,WAAW,EAAEC,WAAW,GAAG,CAJ7B;AAKE,IAAA,UAAU,EAAEC,UALd;AAME,IAAA,QAAQ,EAAEC,QANZ;AAOE,IAAA,IAAI,EAAEC,IAPR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF;AAaD,CA9BD;;AAgCA,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,IAAD;AAAA,SACfA,IAAI,CAACC,MAAL,CAAY,UAACC,GAAD,EAAMC,MAAN,EAAiB;AAC3B,QAAIA,MAAM,CAACC,MAAX,EAAmB;AACjB,UAAMC,KAAK,GAAGF,MAAM,CAACE,KAAP,IAAgB,CAA9B;AACA,aAAOH,GAAG,GAAGG,KAAb;AACD;;AACD,WAAOH,GAAP;AACD,GAND,EAMG,CANH,CADe;AAAA,CAAjB;;AAQA,IAAMI,aAAa,GAAG,SAAhBA,aAAgB,CAACN,IAAD;AAAA,SACpBA,IAAI,CACDO,MADH,CACU,UAACJ,MAAD;AAAA,WAAiBA,MAAM,CAACC,MAAxB;AAAA,GADV,EAEGI,IAFH,CAEQ,UAACC,EAAD,EAAKC,EAAL;AAAA,WAAY,EAAE,CAAAD,EAAE,SAAF,IAAAA,EAAE,WAAF,YAAAA,EAAE,CAAEJ,KAAJ,KAAa,CAAf,KAAqB,CAAAK,EAAE,SAAF,IAAAA,EAAE,WAAF,YAAAA,EAAE,CAAEL,KAAJ,KAAa,CAAlC,CAAZ;AAAA,GAFR,CADoB;AAAA,CAAtB;;AAKA,IAAMM,iBAAiB,GAAG,SAApBA,iBAAoB,QAKT;AAAA,MAJfC,OAIe,SAJfA,OAIe;AAAA,2BAHfC,MAGe;AAAA,MAHfA,MAGe,6BAHN,GAGM;AAAA,MAFfC,aAEe,SAFfA,aAEe;AAAA,MADfC,UACe,SADfA,UACe;;AAAA,kBACSnC,QAAQ,CAACgC,OAAD,CADjB;AAAA;AAAA,MACRZ,IADQ;AAAA,MACFgB,OADE;;AAAA,mBAEqBpC,QAAQ,CAAC0B,aAAa,CAACM,OAAD,CAAd,CAF7B;AAAA;AAAA,MAERK,UAFQ;AAAA,MAEIC,aAFJ;;AAAA,mBAGuBtC,QAAQ,CAAqBuC,SAArB,CAH/B;AAAA;AAAA,MAGRC,WAHQ;AAAA,MAGKC,cAHL;;AAAA,mBAIWzC,QAAQ,CAACmB,QAAQ,CAACC,IAAD,CAAT,CAJnB;AAAA;AAAA,MAIRsB,KAJQ;AAAA,MAIDC,QAJC;;AAMf5C,EAAAA,SAAS,CAAC,YAAM;AACdqC,IAAAA,OAAO,CAACV,aAAa,CAACM,OAAD,CAAd,CAAP;AACAM,IAAAA,aAAa,CAACZ,aAAa,CAACM,OAAD,CAAd,CAAb;AACAW,IAAAA,QAAQ,CAACxB,QAAQ,CAACa,OAAD,CAAT,CAAR;AACD,GAJQ,EAIN,CAACA,OAAD,CAJM,CAAT;;AAMA,MAAMY,UAAU,GAAG,SAAbA,UAAa,CAACC,KAAD,EAAaC,KAAb,EAA+B;AAChDL,IAAAA,cAAc,CAACK,KAAD,CAAd;AACD,GAFD;;AAGA,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAACF,KAAD,EAAgB;AACjCV,IAAAA,UAAU,IAAIA,UAAU,CAACU,KAAD,CAAxB,CADiC,CAEjC;AACD,GAHD;;AAKA,MAAMG,WAAW,GAAG,SAAdA,WAAc,CAACzB,MAAD,EAAsB;AACxC,QAAM0B,UAAe,GAAGC,KAAK,CAACC,IAAN,CAAWC,MAAM,CAACC,MAAP,CAAcjC,IAAd,CAAX,CAAxB,CADwC,CAExC;;AACA6B,IAAAA,UAAU,CAACK,OAAX,CAAmB,UAACC,QAAD,EAAwB;AACzC,UAAIA,QAAQ,CAACC,IAAT,KAAkBjC,MAAM,CAACiC,IAA7B,EAAmC;AACjC,YAAInB,UAAU,CAACoB,MAAX,GAAoB,CAAxB,EAA2B;AACzBF,UAAAA,QAAQ,CAAC/B,MAAT,GAAkB,CAACD,MAAM,CAACC,MAA1B;AACD,SAFD,MAEO;AACL+B,UAAAA,QAAQ,CAAC/B,MAAT,GAAkB,IAAlB;AACD;AACF;AACF,KARD;AASAY,IAAAA,OAAO,CAACa,UAAD,CAAP,CAZwC,CAaxC;;AACA,QAAMS,aAAa,GAAGhC,aAAa,CAACuB,UAAD,CAAnC;AACAX,IAAAA,aAAa,CAACoB,aAAD,CAAb,CAfwC,CAgBxC;;AACAf,IAAAA,QAAQ,CAACxB,QAAQ,CAACuC,aAAD,CAAT,CAAR,CAjBwC,CAkBxC;;AACAxB,IAAAA,aAAa,IAAIA,aAAa,CAACe,UAAD,CAA9B;AACD,GApBD;;AAsBA,sBACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,mBAAD;AAAqB,IAAA,KAAK,EAAC,MAA3B;AAAkC,IAAA,MAAM,EAAEhB,MAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AACE,IAAA,OAAO,eACL,oBAAC,YAAD;AACE,MAAA,OAAO,EAAEb,IADX;AAEE,MAAA,KAAK,EAAE,KAFT;AAGE,MAAA,QAAQ,EAAE,kBAACG,MAAD;AAAA,eAAsByB,WAAW,CAACzB,MAAD,CAAjC;AAAA,OAHZ;AAIE,MAAA,WAAW,MAJb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ;AASE,IAAA,YAAY,EAAE;AAAEoC,MAAAA,QAAQ,EAAE,OAAZ;AAAqBC,MAAAA,GAAG,EAAE;AAA1B,KAThB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAaE,oBAAC,GAAD;AACE,IAAA,WAAW,EAAEpB,WADf;AAEE,IAAA,WAAW,EAAE7B,iBAFf;AAGE,IAAA,IAAI,EAAE0B,UAHR;AAIE,IAAA,OAAO,EAAEU,UAJX;AAKE,IAAA,WAAW,EAAC,KALd;AAME,IAAA,WAAW,EAAC,KANd;AAOE,IAAA,OAAO,EAAC,OAPV;AAQE,IAAA,WAAW,MARb;AASE,IAAA,YAAY,EAAEH,UAThB;AAUE,IAAA,iBAAiB,MAVnB;AAWE,IAAA,UAAU,EAAE;AAAA,aAAMH,cAAc,CAACF,SAAD,CAApB;AAAA,KAXd;AAYE,IAAA,cAAc,EAAE,CAZlB;AAaE,IAAA,eAAe,EAAC,QAblB;AAcE,IAAA,EAAE,EAAC,KAdL;AAeE,IAAA,EAAE,EAAC,KAfL;AAgBE,IAAA,iBAAiB,EAAE,CAhBrB;AAiBE,IAAA,SAAS,EAAC,KAjBZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAmBGF,UAAU,CAACwB,GAAX,CAAe,UAACC,KAAD;AAAA,wBACd,oBAAC,IAAD;AAAM,MAAA,GAAG,EAAEA,KAAK,CAACN,IAAjB;AAAuB,MAAA,IAAI,EAAEM,KAAK,CAACC,KAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADc;AAAA,GAAf,CAnBH,CAbF,eAoCE,oBAAC,OAAD;AACE,IAAA,MAAM,MADR;AAEE,IAAA,OAAO,EAAE,iBAACC,KAAD,EAAgB;AACvB,aAAOA,KAAK,CAACC,OAAN,CAAcR,MAAd,KAAyB,CAAzB,gBACL,oBAAC,eAAD;AAAiB,QAAA,OAAO,EAAEO,KAAK,CAACC,OAAhC;AAAyC,QAAA,KAAK,EAAEvB,KAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADK,gBAGL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF;AAKD,KARH,CASE;AATF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApCF,CADF,CADF,CADF;AAsDD,CArGD;;AAuGA,eAAeX,iBAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport {\n  Cell,\n  Legend,\n  Pie,\n  PieChart,\n  ResponsiveContainer,\n  Sector,\n  Tooltip\n} from 'recharts'\nimport CustomLegend from '../CustomLegend'\nimport { IDetails, IPieChart } from '../interface'\nimport PieChartTooltip from './DefaultTooltip'\nimport { StyledPieChart } from './StyledPieChart'\n\n// IDetails is the data fomat provided to pie chart\n\nconst renderActiveShape = ({\n  cx,\n  cy,\n  innerRadius,\n  outerRadius,\n  startAngle,\n  endAngle,\n  fill\n}: {\n  cx: number\n  cy: number\n  innerRadius: number\n  outerRadius: number\n  startAngle: number\n  endAngle: number\n  fill: string\n}) => {\n  return (\n    <g>\n      <Sector\n        cx={cx}\n        cy={cy}\n        innerRadius={innerRadius}\n        outerRadius={outerRadius + 5}\n        startAngle={startAngle}\n        endAngle={endAngle}\n        fill={fill}\n      />\n    </g>\n  )\n}\n\nconst getTotal = (data: Array<IDetails>) =>\n  data.reduce((sum, option) => {\n    if (option.active) {\n      const value = option.value || 0\n      return sum + value\n    }\n    return sum\n  }, 0)\nconst getActiveData = (data: Array<IDetails>) =>\n  data\n    .filter((option: any) => option.active)\n    .sort((d1, d2) => -(d1?.value || 0) + (d2?.value || 0))\n\nconst PieChartComponent = ({\n  details,\n  height = 150,\n  onLegendClick,\n  onPieClick\n}: IPieChart) => {\n  const [data, setData] = useState(details)\n  const [activeData, setActiveData] = useState(getActiveData(details))\n  const [activeIndex, setActiveIndex] = useState<number | undefined>(undefined)\n  const [total, setTotal] = useState(getTotal(data))\n\n  useEffect(() => {\n    setData(getActiveData(details))\n    setActiveData(getActiveData(details))\n    setTotal(getTotal(details))\n  }, [details])\n\n  const onPieEnter = (_data: any, index: number) => {\n    setActiveIndex(index)\n  }\n  const pieOnClick = (_data: any) => {\n    onPieClick && onPieClick(_data)\n    // onLegendClick && onLegendClick(_data.payload)\n  }\n\n  const handleClick = (option: IDetails) => {\n    const newDetails: any = Array.from(Object.create(data))\n    // here we are changing active to false for unticked legends\n    newDetails.forEach((dataItem: IDetails) => {\n      if (dataItem.name === option.name) {\n        if (activeData.length > 1) {\n          dataItem.active = !option.active\n        } else {\n          dataItem.active = true\n        }\n      }\n    })\n    setData(newDetails)\n    // here on pie chart we are filtering out those legends which are active\n    const activeDetails = getActiveData(newDetails)\n    setActiveData(activeDetails)\n    // total of sectors based on new active legends\n    setTotal(getTotal(activeDetails))\n    // send changed status of all legend out\n    onLegendClick && onLegendClick(newDetails)\n  }\n\n  return (\n    <StyledPieChart>\n      <ResponsiveContainer width='100%' height={height}>\n        <PieChart>\n          <Legend\n            content={\n              <CustomLegend\n                details={data}\n                isRow={false}\n                onChange={(option: IDetails) => handleClick(option)}\n                isFullWidth\n              />\n            }\n            wrapperStyle={{ position: 'unset', top: '9px' }}\n          />\n\n          <Pie\n            activeIndex={activeIndex}\n            activeShape={renderActiveShape}\n            data={activeData}\n            onClick={pieOnClick}\n            innerRadius='60%'\n            outerRadius='70%'\n            dataKey='value'\n            blendStroke\n            onMouseEnter={onPieEnter}\n            isAnimationActive\n            onMouseOut={() => setActiveIndex(undefined)}\n            animationBegin={2}\n            animationEasing='linear'\n            cx='85%'\n            cy='45%'\n            animationDuration={1}\n            className='pie'\n          >\n            {activeData.map((entry: any) => (\n              <Cell key={entry.name} fill={entry.color} />\n            ))}\n          </Pie>\n          <Tooltip\n            active\n            content={(props: any) => {\n              return props.payload.length !== 0 ? (\n                <PieChartTooltip payload={props.payload} total={total} />\n              ) : (\n                <div />\n              )\n            }}\n            //   wrapperStyle={{ height: '31px', width: '100%' }}\n          />\n        </PieChart>\n      </ResponsiveContainer>\n    </StyledPieChart>\n  )\n}\n\nexport default PieChartComponent\n"]},"metadata":{},"sourceType":"module"}