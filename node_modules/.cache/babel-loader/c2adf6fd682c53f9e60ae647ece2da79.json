{"ast":null,"code":"import _toConsumableArray from \"/Users/farhanansari/Desktop/CODE/PrxProject/untitled folder/reactStoryBook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"/Users/farhanansari/Desktop/CODE/PrxProject/untitled folder/reactStoryBook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/farhanansari/Desktop/CODE/PrxProject/untitled folder/reactStoryBook/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/farhanansari/Desktop/CODE/PrxProject/untitled folder/reactStoryBook/src/components/atoms/Map/index.tsx\";\n\n// The base component - atom - of the leaflet map\nimport { GoogleApiWrapper } from 'google-maps-react';\nimport React, { useEffect, useState, createContext } from 'react';\nimport { Map } from 'react-leaflet';\nimport { LeafletStyles } from 'styled-leaflet';\nimport SettingBox from '../SettingBox';\nimport Settings from '../SettingBox/data';\nimport { ZOOM_500M } from './constants/googleIntegration.constants';\nimport { convertArrayToObject, deepCopy, setLegendMarkers, updateMapWithSettings } from './helperMethods';\nimport LeafletCircleLayer from './layers/LeafletCircleLayer';\nimport LeafletControlLayer from './layers/LeafletControlLayer';\nimport LeafletGeocodingLayer from './layers/LeafletGeocodingLayer';\nimport LeafletHeatLayer from './layers/LeafletHeatLayer';\nimport LeafletMarkerLayer from './layers/LeafletMarkerLayer';\nimport LeafletPolygonLayer from './layers/LeafletPolygonLayer';\nimport LeafletTileLayer from './layers/LeafletTileLayer';\nimport LeafletTrackingLayer from './layers/LeafletTrackingLayer';\nimport LeafletTripsLayer from './layers/LeafletTripsLayer';\nimport { LeafletOverlay } from './utils/LeafletOverlay';\nimport { StyledMap } from './StyledMap';\nimport { LatLngBounds } from 'leaflet';\nimport CustomControl from './SubComponent/CustomControl';\nimport LL from 'leaflet';\n\nvar _ = require('lodash');\n\nexport var GeocodingContext = createContext({});\n\nvar LeafletMapWrapper = function LeafletMapWrapper(props) {\n  var _settingConfig$Legend, _settingConfig$Legend2, _props$geocoding, _props$geocoding2, _props$geocoding3, _props$geocoding10, _props$geocoding16, _props$geocoding20, _configurableOption$h2, _configurableOption$h3, _configurableOption$h4, _props$trips, _configurableOption$h5, _configurableOption$h6, _props$trips2, _props$trips3, _props$trips3$data, _props$trips4, _props$trips4$noSelec, _props$trips5, _props$trips5$noSelec, _props$trips6, _props$trips6$noSelec, _props$trips7, _props$trips7$noSelec, _props$trips8, _props$trips8$noSelec, _props$tracking, _configurableOption$p2, _configurableOption$c;\n\n  var markers = props.markers,\n      theme = props.theme,\n      heatmap = props.heatmap,\n      tiles = props.tiles,\n      poi = props.poi,\n      popupRef = props.popupRef,\n      onEdit = props.onEdit,\n      editPopUpComponent = props.editPopUpComponent,\n      popupCustomComponent = props.popupCustomComponent,\n      circle = props.circle,\n      polygon = props.polygon,\n      _props$locationSearch = props.locationSearch,\n      locationSearch = _props$locationSearch === void 0 ? true : _props$locationSearch,\n      rulerControl = props.rulerControl,\n      traffic = props.traffic,\n      _props$zoomControl = props.zoomControl,\n      zoomControl = _props$zoomControl === void 0 ? true : _props$zoomControl,\n      sendLocationOutside = props.sendLocationOutside,\n      _props$isShowMapTileL = props.isShowMapTileLayer,\n      isShowMapTileLayer = _props$isShowMapTileL === void 0 ? true : _props$isShowMapTileL,\n      handleClosePopup = props.handleClosePopup,\n      _props$showLegendWrap = props.showLegendWrapper,\n      showLegendWrapper = _props$showLegendWrap === void 0 ? true : _props$showLegendWrap,\n      _props$useFlyTo = props.useFlyTo,\n      useFlyTo = _props$useFlyTo === void 0 ? true : _props$useFlyTo,\n      allowCustomControl = props.allowCustomControl,\n      customControlProps = props.customControlProps,\n      setMapProps = props.setMapProps,\n      setFeatureGroupProps = props.setFeatureGroupProps,\n      setLocationSearched = props.setLocationSearched,\n      _props$getLatLong = props.getLatLong,\n      getLatLong = _props$getLatLong === void 0 ? function () {} : _props$getLatLong,\n      _props$currentPage = props.currentPage,\n      currentPage = _props$currentPage === void 0 ? '' : _props$currentPage;\n\n  var _useState = useState(markers),\n      _useState2 = _slicedToArray(_useState, 2),\n      markerConfig = _useState2[0],\n      setmarkerConfig = _useState2[1];\n\n  var _useState3 = useState((props === null || props === void 0 ? void 0 : props.settingConfig) || Settings),\n      _useState4 = _slicedToArray(_useState3, 2),\n      settingConfig = _useState4[0],\n      setSettingConfig = _useState4[1];\n\n  var _useState5 = useState(isShowMapTileLayer),\n      _useState6 = _slicedToArray(_useState5, 2),\n      _isShowTileLayer = _useState6[0],\n      setIsShowTileLayer = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      createShape = _useState8[0],\n      setCreateShape = _useState8[1];\n\n  var _useState9 = useState(React.createRef()),\n      _useState10 = _slicedToArray(_useState9, 2),\n      mapRef = _useState10[0],\n      setMapRef = _useState10[1];\n\n  var maxZoomConst = {\n    google: 20,\n    osm: 18\n  };\n\n  var _useState11 = useState(props.zoom),\n      _useState12 = _slicedToArray(_useState11, 2),\n      localZoom = _useState12[0],\n      setLocalZoom = _useState12[1];\n\n  var selectedTile = tiles === null || tiles === void 0 ? void 0 : tiles.split('_')[0]; // this to decide when to zoom on search place in searchbox or markers.\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      focusSearchPlace = _useState14[0],\n      setFocusSearchPlace = _useState14[1];\n\n  var _useState15 = useState({}),\n      _useState16 = _slicedToArray(_useState15, 2),\n      searchFieldAddressInfo = _useState16[0],\n      setSearchFieldAddressInfo = _useState16[1]; // create a legend model for marker layer\n\n\n  var _useState17 = useState(settingConfig === null || settingConfig === void 0 ? void 0 : (_settingConfig$Legend = settingConfig.Legends) === null || _settingConfig$Legend === void 0 ? void 0 : _settingConfig$Legend.option),\n      _useState18 = _slicedToArray(_useState17, 2),\n      legend = _useState18[0],\n      setLegend = _useState18[1]; // legends in setting will be array of object\n\n\n  var _useState19 = useState(convertArrayToObject(settingConfig === null || settingConfig === void 0 ? void 0 : (_settingConfig$Legend2 = settingConfig.Legends) === null || _settingConfig$Legend2 === void 0 ? void 0 : _settingConfig$Legend2.option)),\n      _useState20 = _slicedToArray(_useState19, 2),\n      legendModel = _useState20[0],\n      setLegendModel = _useState20[1]; // for settings needed configuration\n\n\n  var _useState21 = useState({\n    theme: theme,\n    // map theme\n    heatmap: heatmap,\n    // if heatmap or marker choice\n    tiles: tiles,\n    // of type tTiles\n    isOpenStreet: false,\n    poi: poi,\n    // point of intrest toggle\n    locationSearch: locationSearch,\n    // weather to show search or not\n    rulerControl: !!rulerControl,\n    // weather to show rular or not\n    circle: circle,\n    polygon: polygon,\n    traffic: !!traffic\n  }),\n      _useState22 = _slicedToArray(_useState21, 2),\n      configurableOption = _useState22[0],\n      setConfigurableOption = _useState22[1]; // on setting open modal and fade background\n\n\n  var _useState23 = useState(false),\n      _useState24 = _slicedToArray(_useState23, 2),\n      showModal = _useState24[0],\n      setShowModal = _useState24[1]; // this is to determine weather user searched through search input in map\n\n\n  var _useState25 = useState(false),\n      _useState26 = _slicedToArray(_useState25, 2),\n      isMapSearched = _useState26[0],\n      setIsMapSearched = _useState26[1];\n\n  var _useState27 = useState({\n    zoom: props.zoom,\n    center: props.center,\n    latLngBounds: props.latLngBounds\n  }),\n      _useState28 = _slicedToArray(_useState27, 2),\n      orientation = _useState28[0],\n      setOrientation = _useState28[1];\n\n  var _useState29 = useState(props.geocoding ? props.geocoding : {\n    permission: false,\n    position: props === null || props === void 0 ? void 0 : (_props$geocoding = props.geocoding) === null || _props$geocoding === void 0 ? void 0 : _props$geocoding.position,\n    searchText: props === null || props === void 0 ? void 0 : (_props$geocoding2 = props.geocoding) === null || _props$geocoding2 === void 0 ? void 0 : _props$geocoding2.searchText,\n    isSave: props === null || props === void 0 ? void 0 : (_props$geocoding3 = props.geocoding) === null || _props$geocoding3 === void 0 ? void 0 : _props$geocoding3.isSave\n  }),\n      _useState30 = _slicedToArray(_useState29, 2),\n      geocoding = _useState30[0],\n      setGeocoding = _useState30[1]; // marker drag or geocoding field change will create dragged pheonomenon,so set it true\n  // wherever user not physically writting search text is dagged pheonomenon\n\n\n  var _useState31 = useState(false),\n      _useState32 = _slicedToArray(_useState31, 2),\n      isMarkerDragged = _useState32[0],\n      setIsMarkerDragged = _useState32[1];\n\n  var geocodingContextValue = React.useMemo(function () {\n    return {\n      geocoding: geocoding\n    };\n  }, [geocoding]);\n\n  var _setMarkers = function setMarkers(legends) {\n    // current legends is not euqal to old legend then set false to serach place zooming  i.e. legends will zoom\n    if (JSON.stringify(legend) !== JSON.stringify(legends)) {\n      setFocusSearchPlace(false);\n    } // create a legend model for marker layer\n\n\n    setLegend && setLegend(deepCopy(legends)); // this is needed for settingconfig updation\n\n    setLegendModel(deepCopy(convertArrayToObject(legends))); // this is needed for marker legend model updation\n\n    var newMarker = markerConfig && setLegendMarkers(deepCopy(legends), deepCopy(markerConfig));\n    setmarkerConfig && setmarkerConfig(newMarker);\n  };\n\n  useEffect(function () {\n    setIsShowTileLayer(isShowMapTileLayer);\n  }, [isShowMapTileLayer]);\n  useEffect(function () {\n    var _props$settingConfig;\n\n    if ((props === null || props === void 0 ? void 0 : props.settingConfig) && (props === null || props === void 0 ? void 0 : (_props$settingConfig = props.settingConfig) === null || _props$settingConfig === void 0 ? void 0 : _props$settingConfig.Legends)) {\n      var newSettingConfig = deepCopy(settingConfig); // change setting on the basis of new marker legends\n\n      newSettingConfig.Legends.option = legend;\n      setSettingConfig(newSettingConfig);\n    }\n  }, [legend]);\n  useEffect(function () {\n    if (props === null || props === void 0 ? void 0 : props.settingConfig) {\n      setSettingConfig(deepCopy(props === null || props === void 0 ? void 0 : props.settingConfig));\n      setOrientation(_objectSpread(_objectSpread({}, orientation), {}, {\n        zoom: props.zoom\n      }));\n    }\n  }, [props === null || props === void 0 ? void 0 : props.settingConfig]);\n  useEffect(function () {\n    var _props$geocoding4, _props$geocoding5, _props$geocoding6, _props$geocoding6$pos, _geocoding$position, _props$geocoding7, _props$geocoding7$pos, _geocoding$position2;\n\n    if ((props === null || props === void 0 ? void 0 : (_props$geocoding4 = props.geocoding) === null || _props$geocoding4 === void 0 ? void 0 : _props$geocoding4.permission) && (props === null || props === void 0 ? void 0 : (_props$geocoding5 = props.geocoding) === null || _props$geocoding5 === void 0 ? void 0 : _props$geocoding5.position) && (JSON.stringify(props === null || props === void 0 ? void 0 : (_props$geocoding6 = props.geocoding) === null || _props$geocoding6 === void 0 ? void 0 : (_props$geocoding6$pos = _props$geocoding6.position) === null || _props$geocoding6$pos === void 0 ? void 0 : _props$geocoding6$pos[0]) !== JSON.stringify(geocoding === null || geocoding === void 0 ? void 0 : (_geocoding$position = geocoding.position) === null || _geocoding$position === void 0 ? void 0 : _geocoding$position[0]) || JSON.stringify(props === null || props === void 0 ? void 0 : (_props$geocoding7 = props.geocoding) === null || _props$geocoding7 === void 0 ? void 0 : (_props$geocoding7$pos = _props$geocoding7.position) === null || _props$geocoding7$pos === void 0 ? void 0 : _props$geocoding7$pos[1]) !== JSON.stringify(geocoding === null || geocoding === void 0 ? void 0 : (_geocoding$position2 = geocoding.position) === null || _geocoding$position2 === void 0 ? void 0 : _geocoding$position2[1]))) {\n      setGeocoding(function (prevValues) {\n        var _props$geocoding8, _props$geocoding8$pos, _props$geocoding9, _props$geocoding9$pos;\n\n        return _objectSpread(_objectSpread({}, prevValues), {}, {\n          position: [Number(props === null || props === void 0 ? void 0 : (_props$geocoding8 = props.geocoding) === null || _props$geocoding8 === void 0 ? void 0 : (_props$geocoding8$pos = _props$geocoding8.position) === null || _props$geocoding8$pos === void 0 ? void 0 : _props$geocoding8$pos[0]), Number(props === null || props === void 0 ? void 0 : (_props$geocoding9 = props.geocoding) === null || _props$geocoding9 === void 0 ? void 0 : (_props$geocoding9$pos = _props$geocoding9.position) === null || _props$geocoding9$pos === void 0 ? void 0 : _props$geocoding9$pos[1])]\n        });\n      }); // beacuse search/position coming from props and once something in search input we need to focus the field\n\n      setFocusSearchPlace(true);\n    }\n  }, [props === null || props === void 0 ? void 0 : (_props$geocoding10 = props.geocoding) === null || _props$geocoding10 === void 0 ? void 0 : _props$geocoding10.position]);\n  useEffect(function () {\n    var _props$geocoding11, _props$geocoding12, _props$geocoding13;\n\n    if ((props === null || props === void 0 ? void 0 : (_props$geocoding11 = props.geocoding) === null || _props$geocoding11 === void 0 ? void 0 : _props$geocoding11.permission) && (props === null || props === void 0 ? void 0 : (_props$geocoding12 = props.geocoding) === null || _props$geocoding12 === void 0 ? void 0 : _props$geocoding12.customFields) && (props === null || props === void 0 ? void 0 : (_props$geocoding13 = props.geocoding) === null || _props$geocoding13 === void 0 ? void 0 : _props$geocoding13.customFields.length) > 0) {\n      var _props$geocoding14;\n\n      if (!_.isEqual(props === null || props === void 0 ? void 0 : (_props$geocoding14 = props.geocoding) === null || _props$geocoding14 === void 0 ? void 0 : _props$geocoding14.customFields, geocoding === null || geocoding === void 0 ? void 0 : geocoding.customFields)) {\n        setGeocoding(function (prevValues) {\n          var _props$geocoding15;\n\n          return _objectSpread(_objectSpread({}, prevValues), {}, {\n            customFields: _toConsumableArray(props === null || props === void 0 ? void 0 : (_props$geocoding15 = props.geocoding) === null || _props$geocoding15 === void 0 ? void 0 : _props$geocoding15.customFields)\n          });\n        });\n      }\n    }\n  }, [props === null || props === void 0 ? void 0 : (_props$geocoding16 = props.geocoding) === null || _props$geocoding16 === void 0 ? void 0 : _props$geocoding16.customFields]);\n  useEffect(function () {\n    var _props$geocoding17, _props$geocoding18;\n\n    if ((props === null || props === void 0 ? void 0 : (_props$geocoding17 = props.geocoding) === null || _props$geocoding17 === void 0 ? void 0 : _props$geocoding17.permission) && (props === null || props === void 0 ? void 0 : (_props$geocoding18 = props.geocoding) === null || _props$geocoding18 === void 0 ? void 0 : _props$geocoding18.searchText) // props?.geocoding?.searchText !== geocoding?.searchText\n    ) {\n        var _props$geocoding19;\n\n        setIsMapSearched(false);\n        setGeocoding(_objectSpread(_objectSpread({}, geocoding), {}, {\n          searchText: props === null || props === void 0 ? void 0 : (_props$geocoding19 = props.geocoding) === null || _props$geocoding19 === void 0 ? void 0 : _props$geocoding19.searchText\n        })); // beacuse search coming from props and once something in search input we need to focus the field\n\n        setFocusSearchPlace(true);\n      }\n  }, [props === null || props === void 0 ? void 0 : (_props$geocoding20 = props.geocoding) === null || _props$geocoding20 === void 0 ? void 0 : _props$geocoding20.searchText]);\n  useEffect(function () {\n    setConfigurableOption(_objectSpread(_objectSpread({}, configurableOption), {}, {\n      heatmap: heatmap\n    }));\n  }, [heatmap]);\n  useEffect(function () {\n    setConfigurableOption(function (prevOptions) {\n      return _objectSpread(_objectSpread({}, prevOptions), {}, {\n        polygon: polygon\n      });\n    });\n  }, [polygon, polygon === null || polygon === void 0 ? void 0 : polygon.popupRef]);\n  useEffect(function () {\n    setConfigurableOption(function (prevOptions) {\n      return _objectSpread(_objectSpread({}, prevOptions), {}, {\n        circle: circle\n      });\n    });\n  }, [circle]);\n  useEffect(function () {\n    var _configurableOption$h;\n\n    if (configurableOption === null || configurableOption === void 0 ? void 0 : (_configurableOption$h = configurableOption.heatmap) === null || _configurableOption$h === void 0 ? void 0 : _configurableOption$h.permission) {// if heatmap true then hide makers\n      //  setmarkerConfig({ ...markerConfig, permission: false })\n    } else {\n      if ((configurableOption === null || configurableOption === void 0 ? void 0 : configurableOption.heatmap) && markerConfig) {\n        // if heatmap is false then make makers true\n        var newConfig = Object.assign({}, configurableOption);\n        newConfig.heatmap.permission = false;\n        setConfigurableOption(newConfig);\n        setmarkerConfig(_objectSpread(_objectSpread({}, markerConfig), {}, {\n          permission: true\n        }));\n      }\n    }\n  }, [configurableOption === null || configurableOption === void 0 ? void 0 : (_configurableOption$h2 = configurableOption.heatmap) === null || _configurableOption$h2 === void 0 ? void 0 : _configurableOption$h2.permission]);\n  useEffect(function () {\n    var _newSettig$Miscellane, _newSettig$Miscellane2;\n\n    // change in config\n    setConfigurableOption(_objectSpread(_objectSpread({}, configurableOption), {}, {\n      locationSearch: !!props.locationSearch,\n      poi: props.poi,\n      rulerControl: !!props.rulerControl,\n      tiles: tiles\n    }));\n    var newSettig = deepCopy(settingConfig); // change in setting data structure\n\n    newSettig === null || newSettig === void 0 ? void 0 : (_newSettig$Miscellane = newSettig.Miscellaneous) === null || _newSettig$Miscellane === void 0 ? void 0 : (_newSettig$Miscellane2 = _newSettig$Miscellane.option) === null || _newSettig$Miscellane2 === void 0 ? void 0 : _newSettig$Miscellane2.find(function (entry) {\n      if (entry.name === 'Point of interest') {\n        entry.selected = !!poi;\n      } else if (entry.name === 'Traffic') {\n        entry.selected = !!traffic;\n      } else if (entry.name === 'Ruler Control') {\n        entry.selected = !!rulerControl;\n      } else if (entry.name === 'Location Search') {\n        entry.selected = !!locationSearch;\n      }\n    });\n  }, [locationSearch, poi, rulerControl, traffic, tiles]);\n  useEffect(function () {\n    setOrientation(_objectSpread(_objectSpread({}, orientation), {}, {\n      zoom: props.zoom\n    })); // render it on change in setting, legend change which will need for mapping marker layer and setting\n    // markerconfig updation on change in legends on map or setting  and toggled setting legend into legendmodel required for marker layer\n\n    updateMapWithSettings(settingConfig, configurableOption, setConfigurableOption, setSettingConfig, markerConfig, setmarkerConfig, heatmap, geocoding, setGeocoding, locationSearch);\n  }, [settingConfig, legend, legendModel]);\n  useEffect(function () {\n    // if rows data selected from list view is not equal to markerConfig means we trigger list selection then make focust serach place false\n    if (JSON.stringify(markers) !== JSON.stringify(markerConfig)) {\n      setFocusSearchPlace(false);\n    } // update the map state once the input markers are changed\n\n\n    setmarkerConfig(markers);\n  }, [markers]);\n  useEffect(function () {\n    var _mapRef$current, _mapRef$current$conte;\n\n    setMapRef(mapRef);\n    setMapProps === null || setMapProps === void 0 ? void 0 : setMapProps(mapRef.current.leafletElement);\n    var contextValueMap = mapRef === null || mapRef === void 0 ? void 0 : (_mapRef$current = mapRef.current) === null || _mapRef$current === void 0 ? void 0 : (_mapRef$current$conte = _mapRef$current.contextValue) === null || _mapRef$current$conte === void 0 ? void 0 : _mapRef$current$conte.map; // as we get map inside map we are moving flying bound functionality here\n\n    if (contextValueMap) {\n      var _configurableOption$p;\n\n      contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.invalidateSize(true);\n      contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.doubleClickZoom.enable();\n      contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.boxZoom.enable();\n      contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.scrollWheelZoom.enable();\n      contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.dragging.enable();\n\n      if ((_configurableOption$p = configurableOption.polygon) === null || _configurableOption$p === void 0 ? void 0 : _configurableOption$p.permission) {\n        var _Object$values;\n\n        var bounds = new LatLngBounds([]);\n        var boundsData = configurableOption.polygon.editLayer ? configurableOption.polygon.editLayer.data : configurableOption.polygon.data;\n        boundsData && boundsData.length && boundsData.map(function (poly) {\n          var latllnf = poly.polygonCoordinates.map(function (lt) {\n            return [lt.latitude, lt.longitude];\n          });\n          var Latlng = new LatLngBounds(latllnf);\n          bounds.extend(Latlng);\n        });\n\n        if ((_Object$values = Object.values(bounds)) === null || _Object$values === void 0 ? void 0 : _Object$values.length) {\n          contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.fitBounds(bounds, {\n            padding: LL.point(100, 100)\n          });\n        }\n      }\n    }\n  }, [mapRef]);\n  useEffect(function () {\n    if (searchFieldAddressInfo && Object.keys(searchFieldAddressInfo).length > 0 && (searchFieldAddressInfo === null || searchFieldAddressInfo === void 0 ? void 0 : searchFieldAddressInfo.position)) {\n      // while searching this keeps getting trigger so make sure whatevr searching field and (geocoding api)response searchfield should have same value\n      // even above condition not filling and user dragging/changing geocode field then as well send that info outside\n      // if (\n      //   geocoding.searchText === searchFieldAddressInfo.searchText ||\n      //   isMarkerDragged\n      // ) {\n      // dont touch this code, whenever we address from locationSelect(geocoding done in useEffect),this use effect will get called\n      // isMapSearched : true - whenevr user search through input in map search places it will go true\n      sendLocationOutside && sendLocationOutside(_objectSpread(_objectSpread({}, searchFieldAddressInfo), {}, {\n        isPropSearch: isMapSearched\n      })); // }\n    }\n  }, [searchFieldAddressInfo]);\n\n  var updateGeocoding = function updateGeocoding(position, searchText, bounds, recentZoom, radius) {\n    var updatedCustomFields = [];\n\n    if ((geocoding === null || geocoding === void 0 ? void 0 : geocoding.customFields) && (geocoding === null || geocoding === void 0 ? void 0 : geocoding.customFields.length) > 0) {\n      updatedCustomFields = geocoding === null || geocoding === void 0 ? void 0 : geocoding.customFields.map(function (obj) {\n        return obj.name === \"radius\" ? _objectSpread(_objectSpread({}, obj), {}, {\n          value: radius !== null && radius !== void 0 ? radius : 0\n        }) : _objectSpread({}, obj);\n      });\n    }\n\n    var updatedGeocoding = _objectSpread(_objectSpread({}, geocoding), {}, {\n      position: position,\n      searchText: searchText,\n      customFields: _toConsumableArray(updatedCustomFields)\n    });\n\n    setGeocoding(_objectSpread({}, updatedGeocoding));\n    setLocationSearched === null || setLocationSearched === void 0 ? void 0 : setLocationSearched(searchText);\n\n    if (!recentZoom && typeof recentZoom === \"undefined\") {\n      setLocalZoom(14);\n    }\n\n    setOrientation(_objectSpread(_objectSpread({}, orientation), {}, {\n      center: position,\n      latLngBounds: bounds,\n      zoom: recentZoom || 14\n    }));\n  }; // whenever any location is selected or updated, this function is called and focus place variable to true\n\n\n  var onLocationSelect = function onLocationSelect(position, searchText, isMarkerDragged, bounds, _zoom, radius) // isCustomSearch?: boolean\n  {\n    // if marker is not dragged or geocoding fields got changed and automatically got search value then use whatevr coming from props as a searchtext\n    // but use position caluclated in locationSeach which will come in callback args\n    // isMapSearched : false meaning search text coming from prop\n    if (_zoom) setLocalZoom(_zoom);\n\n    if ((geocoding === null || geocoding === void 0 ? void 0 : geocoding.searchText) !== searchText && !isMarkerDragged && !isMapSearched) {\n      updateGeocoding([Number(position === null || position === void 0 ? void 0 : position[0]), Number(position === null || position === void 0 ? void 0 : position[1])], geocoding === null || geocoding === void 0 ? void 0 : geocoding.searchText, bounds, _zoom, radius);\n    } else {\n      updateGeocoding(position, searchText, bounds, _zoom, radius);\n    }\n\n    setFocusSearchPlace(true);\n  }; // on LL popup close\n\n\n  var onhandlePopupClose = function onhandlePopupClose(_e) {\n    handleClosePopup && handleClosePopup(polygon === null || polygon === void 0 ? void 0 : polygon.popupRef);\n  };\n\n  return /*#__PURE__*/React.createElement(GeocodingContext.Provider, {\n    value: geocodingContextValue,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(LeafletStyles, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(StyledMap, {\n    createShape: createShape,\n    isOpenStreet: configurableOption.isOpenStreet // show google sign at bottom when google map selected\n    ,\n    showModal: showModal,\n    onMouseDown: function onMouseDown(e) {\n      var _e$target, _e$target2, _e$target3, _e$target3$className, _e$target4;\n\n      var isLefaletClassName = (e === null || e === void 0 ? void 0 : (_e$target = e.target) === null || _e$target === void 0 ? void 0 : _e$target.className) && typeof (e === null || e === void 0 ? void 0 : (_e$target2 = e.target) === null || _e$target2 === void 0 ? void 0 : _e$target2.className) === 'string' && (e === null || e === void 0 ? void 0 : (_e$target3 = e.target) === null || _e$target3 === void 0 ? void 0 : (_e$target3$className = _e$target3.className) === null || _e$target3$className === void 0 ? void 0 : _e$target3$className.includes('leaflet'));\n\n      if (isLefaletClassName || (e === null || e === void 0 ? void 0 : (_e$target4 = e.target) === null || _e$target4 === void 0 ? void 0 : _e$target4.id) === props.id) {\n        var _mapRef$current2, _mapRef$current2$cont;\n\n        setShowModal(false); // as we get map inside map we are moving flying bound functionality here\n\n        var contextValueMap = mapRef === null || mapRef === void 0 ? void 0 : (_mapRef$current2 = mapRef.current) === null || _mapRef$current2 === void 0 ? void 0 : (_mapRef$current2$cont = _mapRef$current2.contextValue) === null || _mapRef$current2$cont === void 0 ? void 0 : _mapRef$current2$cont.map;\n        contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.invalidateSize(true);\n        contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.doubleClickZoom.enable();\n        contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.boxZoom.enable();\n        contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.scrollWheelZoom.enable();\n        contextValueMap === null || contextValueMap === void 0 ? void 0 : contextValueMap.dragging.enable();\n      }\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Map, {\n    ref: mapRef,\n    id: props.id,\n    className: 'leafletMap ' + props.classes,\n    zoom: orientation.zoom || props.zoom || ZOOM_500M,\n    center: orientation.center || props.center,\n    style: {\n      height: props.height ? props.height : '100%',\n      width: props.width ? props.width : '100%',\n      background: showModal ? '#333' : configurableOption.theme === 'dark' && !configurableOption.isOpenStreet ? '#18273c' : '#ebe9e4'\n    },\n    maxNativeZoom: selectedTile === 'google' ? 21 : 19 // this to stop dancing map\n    ,\n    maxZoom: maxZoomConst[selectedTile || 'google'] || 18 // this is to stop blacking out on map\n    ,\n    scrollWheelZoom: false,\n    zoomControl: false,\n    animate: true,\n    useFlyTo: useFlyTo,\n    duration: 1,\n    worldCopyJump: false // double copy of map restict\n    ,\n    attributionControl: false // leaflet text in bottom hidding\n    ,\n    onPopupClose: onhandlePopupClose,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 444,\n      columnNumber: 9\n    }\n  }, (props === null || props === void 0 ? void 0 : props.settingConfig) && /*#__PURE__*/React.createElement(SettingBox, {\n    onChange: function onChange(settingConfigs) {\n      return setSettingConfig(settingConfigs);\n    },\n    isOpenStreet: configurableOption.isOpenStreet,\n    settingOption: settingConfig,\n    showModal: showModal,\n    handleShowModal: function handleShowModal(showModal) {\n      return setShowModal(showModal);\n    },\n    setMarkers: function setMarkers(legend) {\n      return _setMarkers(legend);\n    },\n    heatMap: !!(configurableOption === null || configurableOption === void 0 ? void 0 : (_configurableOption$h3 = configurableOption.heatmap) === null || _configurableOption$h3 === void 0 ? void 0 : _configurableOption$h3.permission),\n    settingButtonTitle: props.settingButtonTitle,\n    onSettingChange: props === null || props === void 0 ? void 0 : props.onSettingChange,\n    legend: legend,\n    setFocusSearchPlace: setFocusSearchPlace,\n    geocoding: geocoding,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(LeafletGeocodingLayer, Object.assign({}, props, {\n    // position={[props.geocoding?.lat, props.geocoding?.lng]}\n    geocoding: geocoding,\n    onLocationSelect: onLocationSelect,\n    settingConfig: settingConfig,\n    focusSearchPlace: focusSearchPlace,\n    setIsMarkerDragged: setIsMarkerDragged,\n    setIsMapSearched: setIsMapSearched,\n    zoomLGC: localZoom,\n    theMap: mapRef,\n    getLatLong: getLatLong,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(LeafletControlLayer, {\n    currentPage: currentPage,\n    zoomControl: zoomControl,\n    google: props.google,\n    locationSearch: configurableOption.locationSearch,\n    onLocationSelect: onLocationSelect,\n    focusSearchPlace: focusSearchPlace,\n    setIsMarkerDragged: setIsMarkerDragged,\n    isMarkerDragged: isMarkerDragged,\n    setSearchFieldAddressInfo: setSearchFieldAddressInfo,\n    setIsMapSearched: setIsMapSearched,\n    isMapSearched: isMapSearched // shouldReverseGeocode={shouldReverseGeocode}\n    ,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 11\n    }\n  }), props.google && _isShowTileLayer && /*#__PURE__*/React.createElement(LeafletTileLayer, {\n    googleApiKey: props.googleApiKey,\n    tiles: configurableOption.tiles,\n    poi: !!configurableOption.poi,\n    theme: configurableOption.theme,\n    orientation: orientation,\n    traffic: configurableOption.traffic,\n    rulerControl: !!configurableOption.rulerControl,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 13\n    }\n  }), ((markerConfig === null || markerConfig === void 0 ? void 0 : markerConfig.permission) || (configurableOption === null || configurableOption === void 0 ? void 0 : (_configurableOption$h4 = configurableOption.heatmap) === null || _configurableOption$h4 === void 0 ? void 0 : _configurableOption$h4.permission)) && !((_props$trips = props.trips) === null || _props$trips === void 0 ? void 0 : _props$trips.permission) && /*#__PURE__*/React.createElement(LeafletMarkerLayer, {\n    iconsRef: props.iconsRef,\n    popupRef: props.popupRef,\n    marker: markerConfig,\n    google: props.google,\n    geocoding: geocoding,\n    updateMarkers: function updateMarkers(legends) {\n      setFocusSearchPlace(false); // legend change has to be saved ,so that we can update it into settings\n\n      setLegend && setLegend(legends);\n      setLegendModel && setLegendModel(convertArrayToObject(legends)); // legends gets changed in marker layer, we update our marker layer based on new legends\n\n      var newMarker = markerConfig && setLegendMarkers(deepCopy(legends), deepCopy(markerConfig));\n      setmarkerConfig && setmarkerConfig(newMarker);\n    },\n    showModal: showModal,\n    legendModel: legendModel,\n    focusMarkerId: props.focusMarkerId,\n    heatMap: !!(configurableOption === null || configurableOption === void 0 ? void 0 : (_configurableOption$h5 = configurableOption.heatmap) === null || _configurableOption$h5 === void 0 ? void 0 : _configurableOption$h5.permission),\n    focusSearchPlace: focusSearchPlace,\n    showLegendWrapper: showLegendWrapper,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 15\n    }\n  }), (configurableOption === null || configurableOption === void 0 ? void 0 : (_configurableOption$h6 = configurableOption.heatmap) === null || _configurableOption$h6 === void 0 ? void 0 : _configurableOption$h6.permission) && /*#__PURE__*/React.createElement(LeafletHeatLayer, {\n    legend: legend,\n    heatmap: configurableOption === null || configurableOption === void 0 ? void 0 : configurableOption.heatmap,\n    heatMapData: heatmap === null || heatmap === void 0 ? void 0 : heatmap.data,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 13\n    }\n  }), ((_props$trips2 = props.trips) === null || _props$trips2 === void 0 ? void 0 : _props$trips2.permission) && (((_props$trips3 = props.trips) === null || _props$trips3 === void 0 ? void 0 : (_props$trips3$data = _props$trips3.data) === null || _props$trips3$data === void 0 ? void 0 : _props$trips3$data.length) > 0 && !(props === null || props === void 0 ? void 0 : (_props$trips4 = props.trips) === null || _props$trips4 === void 0 ? void 0 : (_props$trips4$noSelec = _props$trips4.noSelectedRows) === null || _props$trips4$noSelec === void 0 ? void 0 : _props$trips4$noSelec.permission) ? /*#__PURE__*/React.createElement(LeafletTripsLayer, Object.assign({}, props, configurableOption, {\n    showModal: showModal,\n    heatMap: !!configurableOption.heatmap,\n    focusSearchPlace: focusSearchPlace,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 580,\n      columnNumber: 15\n    }\n  })) : (props === null || props === void 0 ? void 0 : (_props$trips5 = props.trips) === null || _props$trips5 === void 0 ? void 0 : (_props$trips5$noSelec = _props$trips5.noSelectedRows) === null || _props$trips5$noSelec === void 0 ? void 0 : _props$trips5$noSelec.permission) ? /*#__PURE__*/React.createElement(LeafletOverlay, {\n    title: props === null || props === void 0 ? void 0 : (_props$trips6 = props.trips) === null || _props$trips6 === void 0 ? void 0 : (_props$trips6$noSelec = _props$trips6.noSelectedRows) === null || _props$trips6$noSelec === void 0 ? void 0 : _props$trips6$noSelec.title,\n    showArrow: props === null || props === void 0 ? void 0 : (_props$trips7 = props.trips) === null || _props$trips7 === void 0 ? void 0 : (_props$trips7$noSelec = _props$trips7.noSelectedRows) === null || _props$trips7$noSelec === void 0 ? void 0 : _props$trips7$noSelec.showArrow,\n    showCloseIcon: props === null || props === void 0 ? void 0 : (_props$trips8 = props.trips) === null || _props$trips8 === void 0 ? void 0 : (_props$trips8$noSelec = _props$trips8.noSelectedRows) === null || _props$trips8$noSelec === void 0 ? void 0 : _props$trips8$noSelec.showCloseIcon,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 588,\n      columnNumber: 15\n    }\n  }) : null), ((_props$tracking = props.tracking) === null || _props$tracking === void 0 ? void 0 : _props$tracking.permission) && /*#__PURE__*/React.createElement(LeafletTrackingLayer, Object.assign({}, props, configurableOption, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 596,\n      columnNumber: 13\n    }\n  })), ((_configurableOption$p2 = configurableOption.polygon) === null || _configurableOption$p2 === void 0 ? void 0 : _configurableOption$p2.permission) && /*#__PURE__*/React.createElement(LeafletPolygonLayer, {\n    polygon: configurableOption.polygon,\n    popupRef: popupRef // object to map popupRef\n    ,\n    google: props.google,\n    createShape: createShape,\n    setCreateShape: setCreateShape,\n    editPopUpComponent: editPopUpComponent,\n    onEdit: onEdit,\n    popupCustomComponent: popupCustomComponent,\n    setFeatureGroupProps: setFeatureGroupProps,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 13\n    }\n  }), ((_configurableOption$c = configurableOption.circle) === null || _configurableOption$c === void 0 ? void 0 : _configurableOption$c.permission) && /*#__PURE__*/React.createElement(LeafletCircleLayer, {\n    circle: configurableOption.circle // circle with -data,permission,tooltipKey,popupRefType\n    ,\n    popupRef: popupRef // object to map popupRef\n    ,\n    google: props.google // google, for geocoder location find\n    ,\n    createShape: createShape,\n    setCreateShape: setCreateShape,\n    popupCustomComponent: popupCustomComponent,\n    editPopUpComponent: editPopUpComponent,\n    onEdit: onEdit,\n    setFeatureGroupProps: setFeatureGroupProps,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 613,\n      columnNumber: 13\n    }\n  }), allowCustomControl && /*#__PURE__*/React.createElement(CustomControl, Object.assign({}, customControlProps, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 37\n    }\n  })))));\n};\n\nvar LeafletMap = GoogleApiWrapper(function (props) {\n  return {\n    apiKey: props.googleApiKey\n  };\n})(LeafletMapWrapper); // default props for the leaflet map\n\nLeafletMap.defaultProps = {\n  height: '400px',\n  width: '700px',\n  theme: 'light',\n  poi: false,\n  center: [51.0, 19.0],\n  zoom: 4,\n  zoomControl: true,\n  locationSearch: true,\n  tiles: 'google_roadmap'\n};\nexport default LeafletMap;","map":{"version":3,"sources":["/Users/farhanansari/Desktop/CODE/PrxProject/untitled folder/reactStoryBook/src/components/atoms/Map/index.tsx"],"names":["GoogleApiWrapper","React","useEffect","useState","createContext","Map","LeafletStyles","SettingBox","Settings","ZOOM_500M","convertArrayToObject","deepCopy","setLegendMarkers","updateMapWithSettings","LeafletCircleLayer","LeafletControlLayer","LeafletGeocodingLayer","LeafletHeatLayer","LeafletMarkerLayer","LeafletPolygonLayer","LeafletTileLayer","LeafletTrackingLayer","LeafletTripsLayer","LeafletOverlay","StyledMap","LatLngBounds","CustomControl","LL","_","require","GeocodingContext","LeafletMapWrapper","props","markers","theme","heatmap","tiles","poi","popupRef","onEdit","editPopUpComponent","popupCustomComponent","circle","polygon","locationSearch","rulerControl","traffic","zoomControl","sendLocationOutside","isShowMapTileLayer","handleClosePopup","showLegendWrapper","useFlyTo","allowCustomControl","customControlProps","setMapProps","setFeatureGroupProps","setLocationSearched","getLatLong","currentPage","markerConfig","setmarkerConfig","settingConfig","setSettingConfig","_isShowTileLayer","setIsShowTileLayer","createShape","setCreateShape","createRef","mapRef","setMapRef","maxZoomConst","google","osm","zoom","localZoom","setLocalZoom","selectedTile","split","focusSearchPlace","setFocusSearchPlace","searchFieldAddressInfo","setSearchFieldAddressInfo","Legends","option","legend","setLegend","legendModel","setLegendModel","isOpenStreet","configurableOption","setConfigurableOption","showModal","setShowModal","isMapSearched","setIsMapSearched","center","latLngBounds","orientation","setOrientation","geocoding","permission","position","searchText","isSave","setGeocoding","isMarkerDragged","setIsMarkerDragged","geocodingContextValue","useMemo","setMarkers","legends","JSON","stringify","newMarker","newSettingConfig","prevValues","Number","customFields","length","isEqual","prevOptions","newConfig","Object","assign","newSettig","Miscellaneous","find","entry","name","selected","current","leafletElement","contextValueMap","contextValue","map","invalidateSize","doubleClickZoom","enable","boxZoom","scrollWheelZoom","dragging","bounds","boundsData","editLayer","data","poly","latllnf","polygonCoordinates","lt","latitude","longitude","Latlng","extend","values","fitBounds","padding","point","keys","isPropSearch","updateGeocoding","recentZoom","radius","updatedCustomFields","obj","value","updatedGeocoding","onLocationSelect","_zoom","onhandlePopupClose","_e","e","isLefaletClassName","target","className","includes","id","classes","height","width","background","settingConfigs","settingButtonTitle","onSettingChange","googleApiKey","trips","iconsRef","focusMarkerId","noSelectedRows","title","showArrow","showCloseIcon","tracking","LeafletMap","apiKey","defaultProps"],"mappings":"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","sourcesContent":["// The base component - atom - of the leaflet map\n\nimport { GoogleApiWrapper } from 'google-maps-react'\nimport React, { useEffect, useState, createContext } from 'react'\nimport { Map } from 'react-leaflet'\nimport { LeafletStyles } from 'styled-leaflet'\nimport SettingBox from '../SettingBox'\nimport Settings from '../SettingBox/data'\nimport { ZOOM_500M } from './constants/googleIntegration.constants'\nimport {\n  convertArrayToObject,\n  deepCopy,\n  setLegendMarkers,\n  updateMapWithSettings\n} from './helperMethods'\nimport ILeafletMapProps, {\n  ICustomField,\n  ILeafletMapPropsLite,\n  tGeocoding,\n  tSearchFieldAddressInfo\n} from './interfaces.d'\nimport LeafletCircleLayer from './layers/LeafletCircleLayer'\nimport LeafletControlLayer from './layers/LeafletControlLayer'\nimport LeafletGeocodingLayer from './layers/LeafletGeocodingLayer'\nimport LeafletHeatLayer from './layers/LeafletHeatLayer'\nimport LeafletMarkerLayer from './layers/LeafletMarkerLayer'\nimport LeafletPolygonLayer from './layers/LeafletPolygonLayer'\nimport LeafletTileLayer from './layers/LeafletTileLayer'\nimport LeafletTrackingLayer from './layers/LeafletTrackingLayer'\nimport LeafletTripsLayer from './layers/LeafletTripsLayer'\nimport { LeafletOverlay } from './utils/LeafletOverlay'\nimport { StyledMap } from './StyledMap'\nimport { tTheme, tTiles } from './types.d'\nimport { LatLngBounds } from 'leaflet'\nimport CustomControl from './SubComponent/CustomControl'\nimport LL from 'leaflet'\nconst _ = require('lodash');\nexport interface IGeocodingContext {\n  geocoding?: tGeocoding\n}\nexport const GeocodingContext = createContext<IGeocodingContext>({})\n\nconst LeafletMapWrapper = (props: ILeafletMapProps) => {\n  const {\n    markers,\n    theme,\n    heatmap,\n    tiles,\n    poi,\n    popupRef,\n    onEdit,\n    editPopUpComponent,\n    popupCustomComponent,\n    circle,\n    polygon,\n    locationSearch = true,\n    rulerControl,\n    traffic,\n    zoomControl = true,\n    sendLocationOutside,\n    isShowMapTileLayer = true,\n    handleClosePopup,\n    showLegendWrapper = true,\n    useFlyTo = true,\n    allowCustomControl,\n    customControlProps,\n    setMapProps,\n    setFeatureGroupProps,\n    setLocationSearched,\n    getLatLong = () => {},\n    currentPage = ''\n    // shouldReverseGeocode = true\n  } = props\n  const [markerConfig, setmarkerConfig] = useState(markers)\n  const [settingConfig, setSettingConfig] = useState(\n    props?.settingConfig || Settings\n  )\n  const [_isShowTileLayer, setIsShowTileLayer] = useState<boolean>(\n    isShowMapTileLayer\n  )\n  const [createShape, setCreateShape] = useState(false)\n  const [mapRef, setMapRef] = useState<any>(React.createRef())\n  const maxZoomConst = { google: 20, osm: 18 }\n  const [localZoom, setLocalZoom] = useState(props.zoom)\n  const selectedTile = tiles?.split('_')[0]\n  // this to decide when to zoom on search place in searchbox or markers.\n  const [focusSearchPlace, setFocusSearchPlace] = useState<boolean>(false)\n  const [searchFieldAddressInfo, setSearchFieldAddressInfo] = useState<\n    tSearchFieldAddressInfo | Partial<tSearchFieldAddressInfo>\n  >({})\n\n  // create a legend model for marker layer\n  const [legend, setLegend] = useState(settingConfig?.Legends?.option)\n\n  // legends in setting will be array of object\n  const [legendModel, setLegendModel] = useState(\n    convertArrayToObject(settingConfig?.Legends?.option)\n  )\n  // for settings needed configuration\n  const [configurableOption, setConfigurableOption] = useState({\n    theme: theme, // map theme\n    heatmap: heatmap, // if heatmap or marker choice\n    tiles: tiles, // of type tTiles\n    isOpenStreet: false,\n    poi: poi, // point of intrest toggle\n    locationSearch: locationSearch, // weather to show search or not\n    rulerControl: !!rulerControl, // weather to show rular or not\n    circle,\n    polygon,\n    traffic: !!traffic\n  })\n\n  // on setting open modal and fade background\n  const [showModal, setShowModal] = useState(false)\n\n  // this is to determine weather user searched through search input in map\n  const [isMapSearched, setIsMapSearched] = useState<boolean>(false)\n\n  const [orientation, setOrientation] = useState({\n    zoom: props.zoom,\n    center: props.center,\n    latLngBounds: props.latLngBounds\n  })\n\n  const [geocoding, setGeocoding] = useState<tGeocoding>(\n    props.geocoding\n      ? props.geocoding\n      : {\n          permission: false,\n          position: props?.geocoding?.position,\n          searchText: props?.geocoding?.searchText,\n          isSave: props?.geocoding?.isSave\n        }\n  )\n  // marker drag or geocoding field change will create dragged pheonomenon,so set it true\n  // wherever user not physically writting search text is dagged pheonomenon\n  const [isMarkerDragged, setIsMarkerDragged] = useState<boolean>(false)\n\n  const geocodingContextValue = React.useMemo(() => ({ geocoding }), [\n    geocoding\n  ])\n  const setMarkers = (legends: any) => {\n    // current legends is not euqal to old legend then set false to serach place zooming  i.e. legends will zoom\n    if (JSON.stringify(legend) !== JSON.stringify(legends)) {\n      setFocusSearchPlace(false)\n    }\n    // create a legend model for marker layer\n    setLegend && setLegend(deepCopy(legends)) // this is needed for settingconfig updation\n    setLegendModel(deepCopy(convertArrayToObject(legends))) // this is needed for marker legend model updation\n\n    const newMarker =\n      markerConfig &&\n      setLegendMarkers(deepCopy(legends), deepCopy(markerConfig))\n\n    setmarkerConfig && setmarkerConfig(newMarker)\n  }\n  useEffect(() => {\n    setIsShowTileLayer(isShowMapTileLayer)\n  }, [isShowMapTileLayer])\n\n  useEffect(() => {\n    if (props?.settingConfig && props?.settingConfig?.Legends) {\n      const newSettingConfig = deepCopy(settingConfig)\n      // change setting on the basis of new marker legends\n      newSettingConfig.Legends.option = legend\n      setSettingConfig(newSettingConfig)\n    }\n  }, [legend])\n\n  useEffect(() => {\n    if (props?.settingConfig) {\n      setSettingConfig(deepCopy(props?.settingConfig))\n      setOrientation({\n        ...orientation,\n        zoom: props.zoom\n      })\n    }\n  }, [props?.settingConfig])\n\n  useEffect(() => {\n    if (\n      props?.geocoding?.permission &&\n      props?.geocoding?.position &&\n      ((JSON.stringify(props?.geocoding?.position?.[0]) !==\n        JSON.stringify(geocoding?.position?.[0])) ||\n      (JSON.stringify(props?.geocoding?.position?.[1]) !==\n        JSON.stringify(geocoding?.position?.[1])))\n    ) {\n      setGeocoding(prevValues => ({\n        ...prevValues,\n        position: [\n          Number(props?.geocoding?.position?.[0]),\n          Number(props?.geocoding?.position?.[1])\n        ]\n      }))\n      // beacuse search/position coming from props and once something in search input we need to focus the field\n      setFocusSearchPlace(true)\n    }\n  }, [props?.geocoding?.position])\n\n  useEffect(() => {\n    if (props?.geocoding?.permission && props?.geocoding?.customFields && props?.geocoding?.customFields.length > 0) {\n      if(!(_.isEqual(props?.geocoding?.customFields, geocoding?.customFields))) {\n        setGeocoding(prevValues => ({\n          ...prevValues,\n          customFields: [...props?.geocoding?.customFields]\n        }))\n      }\n    }\n  }, [props?.geocoding?.customFields])\n\n  useEffect(() => {\n    if (\n      props?.geocoding?.permission &&\n      props?.geocoding?.searchText\n      // props?.geocoding?.searchText !== geocoding?.searchText\n    ) {\n      setIsMapSearched(false)\n      setGeocoding({\n        ...geocoding,\n        searchText: props?.geocoding?.searchText\n      })\n      // beacuse search coming from props and once something in search input we need to focus the field\n      setFocusSearchPlace(true)\n    }\n  }, [props?.geocoding?.searchText])\n\n  useEffect(() => {\n    setConfigurableOption({ ...configurableOption, heatmap })\n  }, [heatmap])\n\n  useEffect(() => {\n    setConfigurableOption(prevOptions => ({ ...prevOptions, polygon }))\n  }, [polygon, polygon?.popupRef])\n  \n  useEffect(() => {\n    setConfigurableOption(prevOptions =>({ ...prevOptions, circle}))\n  }, [circle])\n\n  useEffect(() => {\n    if (configurableOption?.heatmap?.permission) {\n      // if heatmap true then hide makers\n      //  setmarkerConfig({ ...markerConfig, permission: false })\n    } else {\n      if (configurableOption?.heatmap && markerConfig) {\n        // if heatmap is false then make makers true\n        const newConfig = Object.assign({}, configurableOption)\n        newConfig.heatmap.permission = false\n        setConfigurableOption(newConfig)\n        setmarkerConfig({ ...markerConfig, permission: true })\n      }\n    }\n  }, [configurableOption?.heatmap?.permission])\n\n  useEffect(() => {\n    // change in config\n    setConfigurableOption({\n      ...configurableOption,\n      locationSearch: !!props.locationSearch,\n      poi: props.poi,\n      rulerControl: !!props.rulerControl,\n      tiles: tiles\n    })\n    const newSettig = deepCopy(settingConfig)\n    // change in setting data structure\n    newSettig?.Miscellaneous?.option?.find((entry: any) => {\n      if (entry.name === 'Point of interest') {\n        entry.selected = !!poi\n      } else if (entry.name === 'Traffic') {\n        entry.selected = !!traffic\n      } else if (entry.name === 'Ruler Control') {\n        entry.selected = !!rulerControl\n      } else if (entry.name === 'Location Search') {\n        entry.selected = !!locationSearch\n      }\n    })\n  }, [locationSearch, poi, rulerControl, traffic, tiles])\n\n  useEffect(() => {\n    setOrientation({\n      ...orientation,\n      zoom: props.zoom\n    })\n    // render it on change in setting, legend change which will need for mapping marker layer and setting\n    // markerconfig updation on change in legends on map or setting  and toggled setting legend into legendmodel required for marker layer\n    updateMapWithSettings(\n      settingConfig,\n      configurableOption,\n      setConfigurableOption,\n      setSettingConfig,\n      markerConfig,\n      setmarkerConfig,\n      heatmap,\n      geocoding,\n      setGeocoding,\n      locationSearch\n    )\n  }, [settingConfig, legend, legendModel])\n\n  useEffect(() => {\n    // if rows data selected from list view is not equal to markerConfig means we trigger list selection then make focust serach place false\n    if (JSON.stringify(markers) !== JSON.stringify(markerConfig)) {\n      setFocusSearchPlace(false)\n    }\n    // update the map state once the input markers are changed\n    setmarkerConfig(markers)\n  }, [markers])\n\n  useEffect(() => {\n    setMapRef(mapRef)\n    setMapProps?.(mapRef.current.leafletElement)\n    const contextValueMap = mapRef?.current?.contextValue?.map as any\n    // as we get map inside map we are moving flying bound functionality here\n    if (contextValueMap) {\n      contextValueMap?.invalidateSize(true)\n      contextValueMap?.doubleClickZoom.enable()\n      contextValueMap?.boxZoom.enable()\n      contextValueMap?.scrollWheelZoom.enable()\n      contextValueMap?.dragging.enable()\n      if(configurableOption.polygon?.permission){\n        let bounds= new LatLngBounds([])\n        let boundsData= configurableOption.polygon.editLayer? configurableOption.polygon.editLayer.data: configurableOption.polygon.data\n        boundsData && boundsData.length && boundsData.map((poly:any)=>{\n          let latllnf= poly.polygonCoordinates.map((lt:any)=> {\n            return [lt.latitude,lt.longitude]\n          })\n          const Latlng= new LatLngBounds(latllnf)\n          bounds.extend(Latlng)\n        })\n        if(Object.values(bounds)?.length){\n          contextValueMap?.fitBounds(bounds, {padding: LL.point(100, 100)})\n        } \n      }\n\n    }\n  }, [mapRef])\n\n  useEffect(() => {\n    if (\n      searchFieldAddressInfo &&\n      Object.keys(searchFieldAddressInfo).length > 0 &&\n      searchFieldAddressInfo?.position\n    ) {\n      // while searching this keeps getting trigger so make sure whatevr searching field and (geocoding api)response searchfield should have same value\n      // even above condition not filling and user dragging/changing geocode field then as well send that info outside\n      // if (\n      //   geocoding.searchText === searchFieldAddressInfo.searchText ||\n      //   isMarkerDragged\n      // ) {\n      // dont touch this code, whenever we address from locationSelect(geocoding done in useEffect),this use effect will get called\n      // isMapSearched : true - whenevr user search through input in map search places it will go true\n      sendLocationOutside &&\n        sendLocationOutside({\n          ...searchFieldAddressInfo,\n          isPropSearch: isMapSearched\n        })\n      // }\n    }\n  }, [searchFieldAddressInfo])\n\n  const updateGeocoding = (position: any, searchText?: any, bounds?: any, recentZoom?: number, radius?: any) => {\n    let updatedCustomFields: ICustomField[] = [];\n    if(geocoding?.customFields && geocoding?.customFields.length > 0) {\n      updatedCustomFields = geocoding?.customFields.map((obj:ICustomField) => obj.name === \"radius\" ? { ...obj, value: radius ?? 0} : {...obj});\n    }\n    const updatedGeocoding: tGeocoding = {...geocoding, position: position, searchText: searchText, customFields: [...updatedCustomFields] }\n    setGeocoding({...updatedGeocoding});\n    setLocationSearched?.(searchText);\n    if (!recentZoom && typeof recentZoom === \"undefined\") { setLocalZoom(14) }\n    setOrientation({\n      ...orientation,\n      center: position,\n      latLngBounds: bounds,\n      zoom: recentZoom || 14\n    })\n  }\n  // whenever any location is selected or updated, this function is called and focus place variable to true\n  const onLocationSelect = (\n    position: any,\n    searchText?: any,\n    isMarkerDragged?: boolean,\n    bounds?: any,\n    _zoom?: number,\n    radius?: any\n    // isCustomSearch?: boolean\n  ) => {\n    // if marker is not dragged or geocoding fields got changed and automatically got search value then use whatevr coming from props as a searchtext\n    // but use position caluclated in locationSeach which will come in callback args\n    // isMapSearched : false meaning search text coming from prop\n    if (_zoom) setLocalZoom(_zoom)\n    if (\n      geocoding?.searchText !== searchText &&\n      !isMarkerDragged &&\n      !isMapSearched\n    ) {\n      updateGeocoding(\n        [Number(position?.[0]), Number(position?.[1])],\n        geocoding?.searchText,\n        bounds, \n        _zoom,\n        radius\n      )\n    } else {\n      updateGeocoding(position, searchText, bounds, _zoom, radius)\n    }\n    setFocusSearchPlace(true)\n  }\n\n  // on LL popup close\n\n  const onhandlePopupClose = (_e: { popup: any }) => {\n    handleClosePopup && handleClosePopup(polygon?.popupRef)\n  }\n\n  return (\n    <GeocodingContext.Provider value={geocodingContextValue}>\n      {/* Import the static-styling component of the map required by leaflet */}\n      <LeafletStyles />\n\n      {/* This is the main map component */}\n\n      <StyledMap\n        createShape={createShape}\n        isOpenStreet={configurableOption.isOpenStreet} // show google sign at bottom when google map selected\n        showModal={showModal}\n        onMouseDown={(e: any) => {\n          const isLefaletClassName =\n            e?.target?.className &&\n            typeof e?.target?.className === 'string' &&\n            e?.target?.className?.includes('leaflet')\n\n          if (isLefaletClassName || e?.target?.id === props.id) {\n            setShowModal(false)\n            // as we get map inside map we are moving flying bound functionality here\n            const contextValueMap = mapRef?.current?.contextValue?.map as any\n            contextValueMap?.invalidateSize(true)\n            contextValueMap?.doubleClickZoom.enable()\n            contextValueMap?.boxZoom.enable()\n            contextValueMap?.scrollWheelZoom.enable()\n            contextValueMap?.dragging.enable()\n          }\n        }}\n      >\n        <Map\n          ref={mapRef as any}\n          id={props.id}\n          className={'leafletMap ' + props.classes}\n          zoom={orientation.zoom || props.zoom || ZOOM_500M}\n          center={orientation.center || props.center}\n          style={{\n            height: props.height ? props.height : '100%',\n            width: props.width ? props.width : '100%',\n            background: showModal\n              ? '#333'\n              : configurableOption.theme === 'dark' &&\n                !configurableOption.isOpenStreet\n              ? '#18273c'\n              : '#ebe9e4'\n          }}\n          maxNativeZoom={selectedTile === 'google' ? 21 : 19} // this to stop dancing map\n          maxZoom={maxZoomConst[selectedTile || 'google'] || 18} // this is to stop blacking out on map\n          scrollWheelZoom={false}\n          zoomControl={false}\n          animate\n          useFlyTo={useFlyTo}\n          duration={1}\n          worldCopyJump={false} // double copy of map restict\n          attributionControl={false} // leaflet text in bottom hidding\n          onPopupClose={onhandlePopupClose}\n        >\n          {/* Map settings - map mode, theme,legends,control */}\n          {props?.settingConfig && (\n            <SettingBox\n              onChange={(settingConfigs: any) =>\n                setSettingConfig(settingConfigs)\n              }\n              isOpenStreet={configurableOption.isOpenStreet}\n              settingOption={settingConfig}\n              showModal={showModal}\n              handleShowModal={(showModal: boolean) => setShowModal(showModal)}\n              setMarkers={(legend: any) => setMarkers(legend)}\n              heatMap={!!configurableOption?.heatmap?.permission}\n              settingButtonTitle={props.settingButtonTitle}\n              onSettingChange={props?.onSettingChange}\n              legend={legend}\n              setFocusSearchPlace={setFocusSearchPlace}\n              geocoding={geocoding}\n            />\n          )}\n\n          {/* Layers in the map */}\n          {/* Geo coding and location search layer */}\n          <LeafletGeocodingLayer\n            {...props}\n            // position={[props.geocoding?.lat, props.geocoding?.lng]}\n            geocoding={geocoding}\n            onLocationSelect={onLocationSelect}\n            settingConfig={settingConfig}\n            focusSearchPlace={focusSearchPlace}\n            setIsMarkerDragged={setIsMarkerDragged}\n            setIsMapSearched={setIsMapSearched}\n            zoomLGC={localZoom}\n            theMap={mapRef}\n            getLatLong={getLatLong}\n\n          />\n          {/* The layer which displays all the buttons on the map */}\n          <LeafletControlLayer\n            currentPage={currentPage}\n            zoomControl={zoomControl}\n            google={props.google}\n            locationSearch={configurableOption.locationSearch}\n            onLocationSelect={onLocationSelect}\n            focusSearchPlace={focusSearchPlace}\n            setIsMarkerDragged={setIsMarkerDragged}\n            isMarkerDragged={isMarkerDragged}\n            setSearchFieldAddressInfo={setSearchFieldAddressInfo}\n            setIsMapSearched={setIsMapSearched}\n            isMapSearched={isMapSearched}\n            // shouldReverseGeocode={shouldReverseGeocode}\n          />\n          {/* The base layer which will display the map tiles underneath */}\n          {props.google && _isShowTileLayer && (\n            <LeafletTileLayer\n              googleApiKey={props.googleApiKey}\n              tiles={configurableOption.tiles as tTiles}\n              poi={!!configurableOption.poi}\n              theme={configurableOption.theme as tTheme}\n              orientation={orientation}\n              traffic={configurableOption.traffic}\n              rulerControl={!!configurableOption.rulerControl}\n            />\n          )}\n\n          {/* The marker layer which will display all the markers and marker clusters */}\n          {(markerConfig?.permission ||\n            configurableOption?.heatmap?.permission) &&\n            !props.trips?.permission && (\n              <LeafletMarkerLayer\n                iconsRef={props.iconsRef}\n                popupRef={props.popupRef}\n                marker={markerConfig}\n                google={props.google}\n                geocoding={geocoding}\n                updateMarkers={(legends: any) => {\n                  setFocusSearchPlace(false)\n                  // legend change has to be saved ,so that we can update it into settings\n                  setLegend && setLegend(legends)\n                  setLegendModel &&\n                    setLegendModel(convertArrayToObject(legends))\n\n                  // legends gets changed in marker layer, we update our marker layer based on new legends\n                  const newMarker =\n                    markerConfig &&\n                    setLegendMarkers(deepCopy(legends), deepCopy(markerConfig))\n\n                  setmarkerConfig && setmarkerConfig(newMarker)\n                }}\n                showModal={showModal}\n                legendModel={legendModel}\n                focusMarkerId={props.focusMarkerId}\n                heatMap={!!configurableOption?.heatmap?.permission}\n                focusSearchPlace={focusSearchPlace}\n                showLegendWrapper={showLegendWrapper}\n              />\n            )}\n\n          {/* The heat layer which will display all the heatmap */}\n          {configurableOption?.heatmap?.permission && (\n            <LeafletHeatLayer\n              legend={legend}\n              heatmap={configurableOption?.heatmap}\n              heatMapData={heatmap?.data}\n            />\n          )}\n          {/* The trips layer which will display all the path */}\n          {props.trips?.permission &&\n            (props.trips?.data?.length > 0 &&\n            !props?.trips?.noSelectedRows?.permission ? (\n              <LeafletTripsLayer\n                {...props}\n                {...configurableOption}\n                showModal={showModal}\n                heatMap={!!configurableOption.heatmap}\n                focusSearchPlace={focusSearchPlace}\n              />\n            ) : props?.trips?.noSelectedRows?.permission ? (\n              <LeafletOverlay\n                title={props?.trips?.noSelectedRows?.title}\n                showArrow={props?.trips?.noSelectedRows?.showArrow}\n                showCloseIcon={props?.trips?.noSelectedRows?.showCloseIcon}\n              />\n            ) : null)}\n          {/* The tracking layer which will display all the tracking */}\n          {props.tracking?.permission && (\n            <LeafletTrackingLayer {...props} {...configurableOption} />\n          )}\n          {/* Leaflet layer polygon */}\n          {configurableOption.polygon?.permission && (\n            <LeafletPolygonLayer\n              polygon={configurableOption.polygon}\n              popupRef={popupRef} // object to map popupRef\n              google={props.google}\n              createShape={createShape}\n              setCreateShape={setCreateShape}\n              editPopUpComponent={editPopUpComponent}\n              onEdit={onEdit}\n              popupCustomComponent={popupCustomComponent}\n              setFeatureGroupProps={setFeatureGroupProps}\n            />\n          )}\n          {configurableOption.circle?.permission && (\n            <LeafletCircleLayer\n              circle={configurableOption.circle} // circle with -data,permission,tooltipKey,popupRefType\n              popupRef={popupRef} // object to map popupRef\n              google={props.google} // google, for geocoder location find\n              createShape={createShape}\n              setCreateShape={setCreateShape}\n              popupCustomComponent={popupCustomComponent}\n              editPopUpComponent={editPopUpComponent}\n              onEdit={onEdit}\n              setFeatureGroupProps={setFeatureGroupProps}\n            />\n          )}\n          {allowCustomControl &&  ( <CustomControl {...customControlProps} /> )}\n        </Map>\n      </StyledMap>\n    </GeocodingContext.Provider>\n  )\n}\nconst LeafletMap = GoogleApiWrapper((props: ILeafletMapPropsLite) => ({\n  apiKey: props.googleApiKey\n}))(LeafletMapWrapper)\n// default props for the leaflet map\nLeafletMap.defaultProps = {\n  height: '400px',\n  width: '700px',\n  theme: 'light',\n  poi: false,\n  center: [51.0, 19.0],\n  zoom: 4,\n  zoomControl: true,\n  locationSearch: true,\n  tiles: 'google_roadmap'\n} as Partial<ILeafletMapPropsLite>\n\nexport default LeafletMap\n"]},"metadata":{},"sourceType":"module"}